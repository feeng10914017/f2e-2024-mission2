import{a as ca}from"./chunk-L2JNOK66.js";import{c as vn,d as je,f as We,g as Xe,h as qe}from"./chunk-ZSSD5RUB.js";import{b as oa,i as sa,k as aa,m as la,n as Ft}from"./chunk-H2QFNOEX.js";import{$ as Ce,A as _i,B as sn,Ba as Ks,C as an,Ca as Zs,D as qr,E as vi,Fa as Js,Fb as ea,G as ln,Ga as hn,Gb as mn,Ia as yi,K as he,L as Kr,La as b,Lb as Zt,Ma as eo,Oa as Ye,Qb as ia,R as cn,Ra as Qs,Sb as gn,T as Zr,U as kt,Ua as z,Ub as _n,V as Jr,Vb as Ue,W as fe,Wb as na,Y as et,Ya as q,Yb as ra,a as ut,b as $s,ba as Qr,bb as fn,ca as P,d as Ee,db as V,e as Us,eb as Et,f as rn,fb as io,gb as W,h as js,ha as un,hb as At,ib as st,ja as lt,jb as at,k as Q,ka as xt,kb as g,la as bt,lb as m,ma as dn,mb as G,na as Xs,nb as Rt,o as Ae,oa as to,ob as K,pb as D,qa as Ut,qb as O,rb as rt,s as on,sb as It,t as Nt,ta as dt,tb as $e,ua as ne,ub as zt,vb as pn,wb as ta,xa as wt,xb as mt,yb as Dt,z as Ws,za as qs,zb as Pe}from"./chunk-VH4OCJZ5.js";var Yt={KMT:{EMBLEM:"https://upload.wikimedia.org/wikipedia/commons/a/a1/Emblem_of_the_Kuomintang.svg",CN_FULL_NAME:"\u4E2D\u570B\u570B\u6C11\u9EE8",CN_SHORT_NAME:"\u570B\u6C11\u9EE8",EN_FULL_NAME:"Kuomintang Chinese Nationalist Party",EN_SHORT_NAME:"KMT",PRESIDENT_3D_IMG:"images/3d-president/man-vampire.png",REPRESENTATIVE_COLOR:"#8082FF"},DPP:{EMBLEM:"https://upload.wikimedia.org/wikipedia/zh/c/c1/Emblem_of_Democratic_Progressive_Party_%28new%29.svg",CN_FULL_NAME:"\u6C11\u4E3B\u9032\u6B65\u9EE8",CN_SHORT_NAME:"\u6C11\u9032\u9EE8",EN_FULL_NAME:"Democratic Progressive Party",EN_SHORT_NAME:"DPP",PRESIDENT_3D_IMG:"images/3d-president/troll.png",REPRESENTATIVE_COLOR:"#57D2A9"},TPP:{EMBLEM:"https://upload.wikimedia.org/wikipedia/commons/0/0c/Emblem_of_Taiwan_People%27s_Party_2019.svg",CN_FULL_NAME:"\u53F0\u7063\u6C11\u773E\u9EE8",CN_SHORT_NAME:"\u6C11\u773E\u9EE8",EN_FULL_NAME:"Taiwan People's Party",EN_SHORT_NAME:"TPP",PRESIDENT_3D_IMG:"images/3d-president/man_in_steamy_room.png",REPRESENTATIVE_COLOR:"#77DBEE"},PFP:{EMBLEM:"https://upload.wikimedia.org/wikipedia/zh/6/65/Flag_of_People_First_Party.png",CN_FULL_NAME:"\u89AA\u6C11\u9EE8",CN_SHORT_NAME:"\u89AA\u6C11\u9EE8",EN_FULL_NAME:"People First Party",EN_SHORT_NAME:"PFP",PRESIDENT_3D_IMG:"images/3d-president/man-elf.png",REPRESENTATIVE_COLOR:"#F4A76F"},NP:{EMBLEM:"https://upload.wikimedia.org/wikipedia/commons/0/01/Np_logo.svg",CN_FULL_NAME:"\u65B0\u9EE8",CN_SHORT_NAME:"\u65B0\u9EE8",EN_FULL_NAME:"New Party",EN_SHORT_NAME:"NP",PRESIDENT_3D_IMG:"images/3d-president/person-mage.png",REPRESENTATIVE_COLOR:"#F9DA4A"},PETITION:{EMBLEM:"",CN_FULL_NAME:"\u9023\u7F72",CN_SHORT_NAME:"",EN_FULL_NAME:"Petition",EN_SHORT_NAME:"PETITION",PRESIDENT_3D_IMG:"images/3d-president/man-genie.png",REPRESENTATIVE_COLOR:"#CED4DA"},EMPTY:{EMBLEM:"",CN_FULL_NAME:"\u7121\u9EE8\u7C4D\u53CA\u672A\u7D93\u653F\u9EE8\u63A8\u85A6",CN_SHORT_NAME:"",EN_FULL_NAME:"Empty",EN_SHORT_NAME:"EMPTY",PRESIDENT_3D_IMG:"images/3d-president/woman-zombie.png",REPRESENTATIVE_COLOR:"#CED4DA"}};var Ke=class{NO;VOTE_COUNT;constructor(e){this.NO=Number.isNaN(parseInt(e?.NO))?null:e.NO,this.VOTE_COUNT=Number.isNaN(parseInt(e?.VOTE_COUNT))?null:e.VOTE_COUNT}};var yn=class{CANDIDATES_VOTES;VALID_VOTES;INVALID_VOTES;TOTAL_VOTES;UNRETURNED_BALLOTS;TOTAL_ISSUED_BALLOTS;UNUSED_BALLOTS;ELIGIBLE_VOTERS;TURNOUT_RATE;constructor(e){this.CANDIDATES_VOTES=Array.isArray(e?.CANDIDATES_VOTES)?e.CANDIDATES_VOTES.map(i=>new Ke(i)):[],this.VALID_VOTES=Number.isNaN(parseInt(e?.VALID_VOTES))?null:e.VALID_VOTES,this.INVALID_VOTES=Number.isNaN(parseInt(e?.INVALID_VOTES))?null:e.INVALID_VOTES,this.TOTAL_VOTES=Number.isNaN(parseInt(e?.TOTAL_VOTES))?null:e.TOTAL_VOTES,this.UNRETURNED_BALLOTS=Number.isNaN(parseInt(e?.UNRETURNED_BALLOTS))?null:e.UNRETURNED_BALLOTS,this.TOTAL_ISSUED_BALLOTS=Number.isNaN(parseInt(e?.TOTAL_ISSUED_BALLOTS))?null:e.TOTAL_ISSUED_BALLOTS,this.UNUSED_BALLOTS=Number.isNaN(parseInt(e?.UNUSED_BALLOTS))?null:e.UNUSED_BALLOTS,this.ELIGIBLE_VOTERS=Number.isNaN(parseInt(e?.ELIGIBLE_VOTERS))?null:e.ELIGIBLE_VOTERS,this.TURNOUT_RATE=Number.isNaN(parseInt(e?.TURNOUT_RATE))?null:e.TURNOUT_RATE}};var Ne=class extends yn{ADMIN_LEVEL;ADMIN_NAME;ADMIN_CODE;constructor(e){super(e),this.ADMIN_LEVEL=e?.ADMIN_LEVEL||"\u672A\u77E5",this.ADMIN_NAME=e?.ADMIN_NAME||"",this.ADMIN_CODE=e?.ADMIN_CODE||""}};var Ze=class{NO;PARTY;PRESIDENT;VICE_PRESIDENT;constructor(e){this.NO=Number.isNaN(parseInt(e?.NO))?null:e.NO,this.PARTY=e?.PARTY||"",this.PRESIDENT=e?.PRESIDENT||"",this.VICE_PRESIDENT=e?.VICE_PRESIDENT||""}};var $t=class{ELECTION_TITLE;ELECTION_TERM;ELECTION_GREGORIAN_YEAR;CANDIDATES;TOTAL_STATISTICS;ADMIN_COLLECTION;constructor(e){this.ELECTION_TITLE=e?.ELECTION_TITLE||"",this.ELECTION_TERM=Number.isNaN(parseInt(e?.ELECTION_TERM))?null:e.ELECTION_TERM,this.ELECTION_GREGORIAN_YEAR=e?.ELECTION_GREGORIAN_YEAR||"",this.CANDIDATES=Array.isArray(e?.CANDIDATES)?e.CANDIDATES.map(i=>new Ze(i)):[],this.TOTAL_STATISTICS=new Ne(e?.TOTAL_STATISTICS),this.ADMIN_COLLECTION=Array.isArray(e?.ADMIN_COLLECTION)?e.ADMIN_COLLECTION.map(i=>new Ne(i)):[]}};var xi=class{COUNTYCODE;COUNTYENG;COUNTYID;COUNTYNAME;NOTE;TOWNCODE;TOWNID;TOWNNAME;VILLCODE;VILLENG;VILLNAME;constructor(e){this.COUNTYCODE=e.COUNTYCODE||"",this.COUNTYENG=e.COUNTYENG||"",this.COUNTYID=e.COUNTYID||"",this.COUNTYNAME=e.COUNTYNAME||"",this.NOTE=e.NOTE||"",this.TOWNCODE=e.TOWNCODE||"",this.TOWNID=e.TOWNID||"",this.TOWNNAME=e.TOWNNAME||"",this.VILLCODE=e.VILLCODE||"",this.VILLENG=e.VILLENG||"",this.VILLNAME=e.VILLNAME||""}};var Je=class t{constructor(e,i){this.http=e;this.commonService=i}fetchCountyGeoJson(){let e="COUNTY_MOI_1130718",i="map-topo-json/"+e+".json";return this.http.get(i).pipe(Nt(n=>n),Nt(n=>this.commonService.convertTopoToFeatures(n,e)),Nt(n=>n.features),Jr(n=>n.forEach(r=>r.properties=new xi(r.properties))),cn(1))}fetchTownshipGeoJson(){let e="TOWN_MOI_1130718",i="map-topo-json/"+e+".json";return this.http.get(i).pipe(Nt(n=>n),Nt(n=>this.commonService.convertTopoToFeatures(n,e)),Nt(n=>n.features),Jr(n=>n.forEach(r=>r.properties=new xi(r.properties))),cn(1))}fetchCentralVotesJson(e){let i=`presidential-election-json/${e}/CENTRAL.json`;return this.http.get(i).pipe(Nt(n=>new $t(n)))}fetchCountyVotesJson(e,i){let n=`presidential-election-json/${e}/COUNTY_${i}.json`;return this.http.get(n).pipe(Nt(r=>new $t(r)))}fetchTownVotesJson(e,i){let n=`presidential-election-json/${e}/TOWN_${i}.json`;return this.http.get(n).pipe(Nt(r=>new $t(r)))}static \u0275fac=function(i){return new(i||t)(Qr(oa),Qr(Ft))};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})};function no(t){return Array.isArray(t)?t:[t]}function ot(t){return t==null?"":typeof t=="string"?t:`${t}px`}function ua(t){return t instanceof wt?t.nativeElement:t}var ro;try{ro=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ro=!1}var Se=(()=>{class t{_platformId=P(Ks);isBrowser=this._platformId?ra(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||ro)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ke;function oo(){if(ke==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ke=!1,ke;if("scrollBehavior"in document.documentElement.style)ke=!0;else{let t=Element.prototype.scrollTo;t?ke=!/\{\s*\[native code\]\s*\}/.test(t.toString()):ke=!1}}return ke}function so(t){return t.composedPath?t.composedPath()[0]:t.target}function ao(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Iu=new Ce("cdk-dir-doc",{providedIn:"root",factory:Bu});function Bu(){return P(Zt)}var Gu=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Hu(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?Gu.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var da=(()=>{class t{value="ltr";change=new dt;constructor(){let i=P(Iu,{optional:!0});if(i){let n=i.body?i.body.dir:null,r=i.documentElement?i.documentElement.dir:null;this.value=Hu(n||r||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var zu=20,ga=(()=>{class t{_ngZone=P(ne);_platform=P(Se);_renderer=P(Ye).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Q;_scrolledCount=0;scrollContainers=new Map;register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let n=this.scrollContainers.get(i);n&&(n.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=zu){return this._platform.isBrowser?new js(n=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=i>0?this._scrolled.pipe(qr(i)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Ae()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((i,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(i,n){let r=this.getAncestorScrollContainers(i);return this.scrolled(n).pipe(an(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(i){let n=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,i)&&n.push(o)}),n}_scrollableContainsElement(i,n){let r=ua(n),o=i.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Du=20,co=(()=>{class t{_platform=P(Se);_listeners;_viewportSize;_change=new Q;_document=P(Zt,{optional:!0});constructor(){let i=P(ne),n=P(Ye).createRenderer(null,null);i.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[n.listen("window","resize",r),n.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(i=>i()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+r,right:i.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,n=this._getWindow(),r=i.documentElement,o=r.getBoundingClientRect(),s=-o.top||i.body.scrollTop||n.scrollY||r.scrollTop||0,a=-o.left||i.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(i=Du){return i>0?this._change.pipe(qr(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var bi=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},wi=class extends bi{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,i,n,r,o){super(),this.component=e,this.viewContainerRef=i,this.injector=n,this.projectableNodes=o}},wn=class extends bi{templateRef;viewContainerRef;context;injector;constructor(e,i,n,r){super(),this.templateRef=e,this.viewContainerRef=i,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,i=this.context){return this.context=i,super.attach(e)}detach(){return this.context=void 0,super.detach()}},uo=class extends bi{element;constructor(e){super(),this.element=e instanceof wt?e.nativeElement:e}},ho=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof wi)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof wn)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof uo)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var En=class extends ho{outletElement;_appRef;_defaultInjector;_document;constructor(e,i,n,r,o){super(),this.outletElement=e,this._appRef=n,this._defaultInjector=r,this._document=o}attachComponentPortal(e){let i;if(e.viewContainerRef){let n=e.injector||e.viewContainerRef.injector,r=n.get(Qs,null,{optional:!0})||void 0;i=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:n,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>i.destroy())}else i=mn(e.component,{elementInjector:e.injector||this._defaultInjector||Ut.NULL,environmentInjector:this._appRef.injector,projectableNodes:e.projectableNodes||void 0}),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let i=e.viewContainerRef,n=i.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=i.indexOf(n);r!==-1&&i.remove(r)}),this._attachedPortal=e,n}attachDomPortal=e=>{let i=e.element;i.parentNode;let n=this._document.createComment("dom-portal");i.parentNode.insertBefore(n,i),this.outletElement.appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(i,n)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var An=new WeakMap,fo=(()=>{class t{_appRef;_injector=P(Ut);_environmentInjector=P(un);load(i){let n=this._appRef=this._appRef||this._injector.get(fn),r=An.get(n);r||(r={loaders:new Set,refs:[]},An.set(n,r),n.onDestroy(()=>{An.get(n)?.refs.forEach(o=>o.destroy()),An.delete(n)})),r.loaders.has(i)||(r.loaders.add(i),r.refs.push(mn(i,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var po={},_a=(()=>{class t{_appId=P(qs);getId(i){return this._appId!=="ng"&&(i+=this._appId),po.hasOwnProperty(i)||(po[i]=0),`${i}${po[i]++}`}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var va=oo(),mo=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,i){this._viewportRuler=e,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ot(-this._previousScrollPosition.left),e.style.top=ot(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,i=this._document.body,n=e.style,r=i.style,o=n.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),va&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),va&&(n.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.body,n=this._viewportRuler.getViewportSize();return i.scrollHeight>n.height||i.scrollWidth>n.width}};var go=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,i,n,r){this._scrollDispatcher=e,this._ngZone=i,this._viewportRuler=n,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(an(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},Cn=class{enable(){}disable(){}attach(){}};function _o(t,e){return e.some(i=>{let n=t.bottom<i.top,r=t.top>i.bottom,o=t.right<i.left,s=t.left>i.right;return n||r||o||s})}function ya(t,e){return e.some(i=>{let n=t.top<i.top,r=t.bottom>i.bottom,o=t.left<i.left,s=t.right>i.right;return n||r||o||s})}var vo=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,i,n,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=n,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();_o(i,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Yu=(()=>{class t{_scrollDispatcher=P(ga);_viewportRuler=P(co);_ngZone=P(ne);_document=P(Zt);constructor(){}noop=()=>new Cn;close=i=>new go(this._scrollDispatcher,this._ngZone,this._viewportRuler,i);block=()=>new mo(this._viewportRuler,this._document);reposition=i=>new vo(this._scrollDispatcher,this._viewportRuler,this._ngZone,i);static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yo=class{positionStrategy;scrollStrategy=new Cn;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let i=Object.keys(e);for(let n of i)e[n]!==void 0&&(this[n]=e[n])}}};var xo=class{connectionPair;scrollableViewProperties;constructor(e,i){this.connectionPair=e,this.scrollableViewProperties=i}};var Ca=(()=>{class t{_attachedOverlays=[];_document=P(Zt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let n=this._attachedOverlays.indexOf(i);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$u=(()=>{class t extends Ca{_ngZone=P(ne);_renderer=P(Ye).createRenderer(null,null);_cleanupKeydown;add(i){super.add(i),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=i=>{let n=this._attachedOverlays;for(let r=n.length-1;r>-1;r--)if(n[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>n[r]._keydownEvents.next(i));break}};static \u0275fac=(()=>{let i;return function(r){return(i||(i=to(t)))(r||t)}})();static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Uu=(()=>{class t extends Ca{_platform=P(Se);_ngZone=P(ne,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(i){if(super.add(i),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=i=>{this._pointerDownEventTarget=so(i)};_clickListener=i=>{let n=so(i),r=i.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:n;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(xa(a.overlayElement,n)||xa(a.overlayElement,r))break;let u=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(i)):u.next(i)}};static \u0275fac=(()=>{let i;return function(r){return(i||(i=to(t)))(r||t)}})();static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xa(t,e){let i=typeof ShadowRoot<"u"&&ShadowRoot,n=e;for(;n;){if(n===t)return!0;n=i&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var Pa=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=z({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(n,r){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return t})(),Na=(()=>{class t{_platform=P(Se);_containerElement;_document=P(Zt);_styleLoader=P(fo);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||ao()){let r=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let n=this._document.createElement("div");n.classList.add(i),ao()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}_loadStyles(){this._styleLoader.load(Pa)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bo=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropElement=null;_backdropTimeout;_backdropClick=new Q;_attachments=new Q;_detachments=new Q;_positionStrategy;_scrollStrategy;_locationChanges=rn.EMPTY;_cleanupBackdropClick;_cleanupBackdropTransitionEnd;_previousHostParent;_keydownEvents=new Q;_outsidePointerEvents=new Q;_renders=new Q;_afterRenderRef;_afterNextRenderRef;constructor(e,i,n,r,o,s,a,u,c,l=!1,d,h){this._portalOutlet=e,this._host=i,this._pane=n,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=u,this._outsideClickDispatcher=c,this._animationsDisabled=l,this._injector=d,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=ea(()=>Js(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=hn(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=ut(ut({},this._config),e),this._updateElementSize()}setDirection(e){this._config=$s(ut({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=ot(this._config.width),e.height=ot(this._config.height),e.minWidth=ot(this._config.minWidth),e.minHeight=ot(this._config.minHeight),e.maxWidth=ot(this._config.maxWidth),e.maxHeight=ot(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._cleanupBackdropClick?.(),this._cleanupBackdropClick=this._renderer.listen(this._backdropElement,"click",i=>this._backdropClick.next(i)),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{this._cleanupBackdropTransitionEnd?.(),this._cleanupBackdropTransitionEnd=this._renderer.listen(e,"transitionend",i=>{this._disposeBackdrop(i.target)})}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,i,n){let r=no(i||[]).filter(o=>!!o);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(kt(sn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){this._cleanupBackdropClick?.(),this._cleanupBackdropTransitionEnd?.(),e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},ba="cdk-overlay-connected-position-bounding-box",ju=/([A-Za-z%]+)$/,wo=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Q;_resizeSubscription=rn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,i,n,r,o){this._viewportRuler=i,this._document=n,this._platform=r,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(ba),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,i=this._overlayRect,n=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let u=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(u,i,a),l=this._getOverlayFit(c,i,n,a);if(l.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,u);return}if(this._canFitWithFlexibleDimensions(l,c,n)){o.push({position:a,origin:u,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(u,a)});continue}(!s||s.overlayFit.visibleArea<l.visibleArea)&&(s={overlayFit:l,overlayPoint:c,originPoint:u,position:a,overlayRect:i})}if(o.length){let a=null,u=-1;for(let c of o){let l=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);l>u&&(u=l,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Oe(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ba),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,i)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,i,n){let r;if(n.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=n.originX=="start"?s:a}i.left<0&&(r-=i.left);let o;return n.originY=="center"?o=e.top+e.height/2:o=n.originY=="top"?e.top:e.bottom,i.top<0&&(o-=i.top),{x:r,y:o}}_getOverlayPoint(e,i,n){let r;n.overlayX=="center"?r=-i.width/2:n.overlayX==="start"?r=this._isRtl()?-i.width:0:r=this._isRtl()?0:-i.width;let o;return n.overlayY=="center"?o=-i.height/2:o=n.overlayY=="top"?0:-i.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,i,n,r){let o=Ea(i),{x:s,y:a}=e,u=this._getOffset(r,"x"),c=this._getOffset(r,"y");u&&(s+=u),c&&(a+=c);let l=0-s,d=s+o.width-n.width,h=0-a,f=a+o.height-n.height,p=this._subtractOverflows(o.width,l,d),_=this._subtractOverflows(o.height,h,f),y=p*_;return{visibleArea:y,isCompletelyWithinViewport:o.width*o.height===y,fitsInViewportVertically:_===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(e,i,n){if(this._hasFlexibleDimensions){let r=n.bottom-i.y,o=n.right-i.x,s=wa(this._overlayRef.getConfig().minHeight),a=wa(this._overlayRef.getConfig().minWidth),u=e.fitsInViewportVertically||s!=null&&s<=r,c=e.fitsInViewportHorizontally||a!=null&&a<=o;return u&&c}return!1}_pushOverlayOnScreen(e,i,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=Ea(i),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),u=Math.max(o.top-n.top-e.y,0),c=Math.max(o.left-n.left-e.x,0),l=0,d=0;return r.width<=o.width?l=c||-s:l=e.x<this._viewportMargin?o.left-n.left-e.x:0,r.height<=o.height?d=u||-a:d=e.y<this._viewportMargin?o.top-n.top-e.y:0,this._previousPushAmount={x:l,y:d},{x:e.x+l,y:e.y+d}}_applyPosition(e,i){if(this._setTransformOrigin(e),this._setOverlayElementStyles(i,e),this._setBoundingBoxStyles(i,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!Wu(this._lastScrollVisibility,n)){let r=new xo(e,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=e.overlayY;e.overlayX==="center"?n="center":this._isRtl()?n=e.overlayX==="start"?"right":"left":n=e.overlayX==="start"?"left":"right";for(let o=0;o<i.length;o++)i[o].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,i){let n=this._viewportRect,r=this._isRtl(),o,s,a;if(i.overlayY==="top")s=e.y,o=n.height-s+this._viewportMargin;else if(i.overlayY==="bottom")a=n.height-e.y+this._viewportMargin*2,o=n.height-a+this._viewportMargin;else{let f=Math.min(n.bottom-e.y+n.top,e.y),p=this._lastBoundingBoxSize.height;o=f*2,s=e.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-p/2)}let u=i.overlayX==="start"&&!r||i.overlayX==="end"&&r,c=i.overlayX==="end"&&!r||i.overlayX==="start"&&r,l,d,h;if(c)h=n.width-e.x+this._viewportMargin*2,l=e.x-this._viewportMargin;else if(u)d=e.x,l=n.right-e.x;else{let f=Math.min(n.right-e.x+n.left,e.x),p=this._lastBoundingBoxSize.width;l=f*2,d=e.x-f,l>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:s,left:d,bottom:a,right:h,width:l,height:o}}_setBoundingBoxStyles(e,i){let n=this._calculateBoundingBoxRect(e,i);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=ot(n.height),r.top=ot(n.top),r.bottom=ot(n.bottom),r.width=ot(n.width),r.left=ot(n.left),r.right=ot(n.right),i.overlayX==="center"?r.alignItems="center":r.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?r.justifyContent="center":r.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=ot(o)),s&&(r.maxWidth=ot(s))}this._lastBoundingBoxSize=n,Oe(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Oe(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Oe(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,i){let n={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let l=this._viewportRuler.getViewportScrollPosition();Oe(n,this._getExactOverlayY(i,e,l)),Oe(n,this._getExactOverlayX(i,e,l))}else n.position="static";let a="",u=this._getOffset(i,"x"),c=this._getOffset(i,"y");u&&(a+=`translateX(${u}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),s.maxHeight&&(r?n.maxHeight=ot(s.maxHeight):o&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=ot(s.maxWidth):o&&(n.maxWidth="")),Oe(this._pane.style,n)}_getExactOverlayY(e,i,n){let r={top:"",bottom:""},o=this._getOverlayPoint(i,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=ot(o.y);return r}_getExactOverlayX(e,i,n){let r={left:"",right:""},o=this._getOverlayPoint(i,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=ot(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),i=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ya(e,n),isOriginOutsideView:_o(e,n),isOverlayClipped:ya(i,n),isOverlayOutsideView:_o(i,n)}}_subtractOverflows(e,...i){return i.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+i-this._viewportMargin,width:e-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,i){return i==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&no(e).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof wt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let i=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+i,height:n,width:i}}};function Oe(t,e){for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function wa(t){if(typeof t!="number"&&t!=null){let[e,i]=t.split(ju);return!i||i==="px"?parseFloat(e):null}return t||null}function Ea(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function Wu(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var Aa="cdk-global-overlay-wrapper",Eo=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let i=e.getConfig();this._overlayRef=e,this._width&&!i.width&&e.updateSize({width:this._width}),this._height&&!i.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Aa),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=n,u=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),l=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",_="";u?_="flex-start":l==="center"?(_="center",h?p=d:f=d):h?l==="left"||l==="end"?(_="flex-end",f=d):(l==="right"||l==="start")&&(_="flex-start",p=d):l==="left"||l==="start"?(_="flex-start",f=d):(l==="right"||l==="end")&&(_="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=u?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=u?"0":p,i.justifyContent=_,i.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,n=i.style;i.classList.remove(Aa),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},Xu=(()=>{class t{_viewportRuler=P(co);_document=P(Zt);_platform=P(Se);_overlayContainer=P(Na);constructor(){}global(){return new Eo}flexibleConnectedTo(i){return new wo(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ka=(()=>{class t{scrollStrategies=P(Yu);_overlayContainer=P(Na);_positionBuilder=P(Xu);_keyboardDispatcher=P($u);_injector=P(Ut);_ngZone=P(ne);_document=P(Zt);_directionality=P(da);_location=P(ia);_outsideClickDispatcher=P(Uu);_animationsModuleType=P(Zs,{optional:!0});_idGenerator=P(_a);_renderer=P(Ye).createRenderer(null,null);_appRef;_styleLoader=P(fo);constructor(){}create(i){this._styleLoader.load(Pa);let n=this._createHostElement(),r=this._createPaneElement(n),o=this._createPortalOutlet(r),s=new yo(i);return s.direction=s.direction||this._directionality.value,new bo(o,n,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(un),this._renderer)}position(){return this._positionBuilder}_createPaneElement(i){let n=this._document.createElement("div");return n.id=this._idGenerator.getId("cdk-overlay-"),n.classList.add("cdk-overlay-pane"),i.appendChild(n),n}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(fn)),new En(i,null,this._appRef,this._injector,this._document)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Qe=class{constructor(e,i){this.overlay=e;this.config=i;this.overlayRef=this.overlay.create({hasBackdrop:!0,disposeOnNavigation:!0,positionStrategy:this.overlay.position().global().centerHorizontally().centerVertically(),width:this.config?.width,height:this.config?.height,panelClass:this.config?.panelClass}),this.id=this.overlayRef.overlayElement.id,this.config&&(this.config?.lockBackdrop||this.overlayRef.backdropClick().subscribe(()=>this.close()))}_afterClosedSubject=new Q;overlayRef;id;close(e){this.overlayRef.dispose(),this._afterClosedSubject.next(e),this._afterClosedSubject.complete()}afterClosed(){return this._afterClosedSubject.asObservable()}},Ao=new Ce("DIALOG_DATA"),Pn=class t{_overlay=P(ka);_injector=P(Ut);activeDialog=[];open(e,i,n){n?.lockScroll;let r=new Qe(this._overlay,n);this.toggleScrollLock(r.id,!!n?.lockScroll),r.afterClosed().subscribe(()=>this.toggleScrollLock(r.id,!1));let o=Ut.create({providers:[{provide:Qe,useValue:r},{provide:Ao,useValue:i}],parent:this._injector}),s=new wi(e,null,o);return r.overlayRef.attach(s),r}toggleScrollLock(e,i){i?this.activeDialog.push(e):this.activeDialog=this.activeDialog.filter(n=>n!==e),this.activeDialog.length>0?document.querySelector("body")?.classList.add("overflow-hidden"):document.querySelector("body")?.classList.remove("overflow-hidden")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})};function Ku(t,e){t&1&&(g(0,"span"),O(1,"/"),m())}function Zu(t,e){if(t&1&&(g(0,"span"),O(1),m()),t&2){let i=D().$implicit;b(),rt(i)}}function Ju(t,e){if(t&1&&(g(0,"span",1),O(1),m()),t&2){let i=D().$implicit;b(),rt(i)}}function Qu(t,e){if(t&1&&q(0,Ku,2,0,"span")(1,Zu,2,1,"span")(2,Ju,2,1,"span",1),t&2){let i=e.$index,n=e.$count;W(i!==0?0:-1),b(),W(i!==n-1?1:2)}}var Nn=class t{breadcrumbList;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-breadcrumb"]],inputs:{breadcrumbList:"breadcrumbList"},decls:3,vars:0,consts:[[1,"flex","h-full","items-center","gap-x-2","text-base","leading-4","text-light"],[1,"text-primary"]],template:function(i,n){i&1&&(g(0,"div",0),st(1,Qu,3,2,null,null,At),m()),i&2&&(b(),at(n.breadcrumbList))},styles:["span[_ngcontent-%COMP%]{cursor:default}"]})};var kn=class t{commonService=P(Ft);toTopBtnVisible$=_i(window,"scroll").pipe(Nt(()=>document.documentElement.scrollTop>50));static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-to-top-button"]],decls:4,vars:3,consts:[[1,"fixed","bottom-6","right-6","opacity-0"],["type","button",1,"flex","h-11","w-11","items-center","justify-center","rounded-full","border","border-solid","border-primary","bg-white",3,"click"],["src","images/icons/arrow_upward.png","alt","arrow_upward",1,"pointer-events-none","h-5","w-5"]],template:function(i,n){i&1&&(g(0,"div",0),mt(1,"async"),g(2,"button",1),K("click",function(){return n.commonService.scrollToTop()}),G(3,"img",2),m()()),i&2&&V("@opacityVisibleHidden",Dt(1,1,n.toTopBtnVisible$)?"visible":"hidden")},dependencies:[_n],encapsulation:2,data:{animation:[vn("opacityVisibleHidden",[Xe("visible",We({opacity:"1"})),Xe("hidden",We({opacity:"0"})),qe("visible => hidden",[je("0.2s")]),qe("hidden => visible",[je("0.2s")])])]}})};function Me(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Co(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Sn(t){let e,i,n;t.length!==2?(e=Me,i=(a,u)=>Me(t(a),u),n=(a,u)=>t(a)-u):(e=t===Me||t===Co?t:td,i=t,n=t);function r(a,u,c=0,l=a.length){if(c<l){if(e(u,u)!==0)return l;do{let d=c+l>>>1;i(a[d],u)<0?c=d+1:l=d}while(c<l)}return c}function o(a,u,c=0,l=a.length){if(c<l){if(e(u,u)!==0)return l;do{let d=c+l>>>1;i(a[d],u)<=0?c=d+1:l=d}while(c<l)}return c}function s(a,u,c=0,l=a.length){let d=r(a,u,c,l-1);return d>c&&n(a[d-1],u)>-n(a[d],u)?d-1:d}return{left:r,center:s,right:o}}function td(){return 0}function Po(t){return t===null?NaN:+t}var Sa=Sn(Me),Oa=Sa.right,ed=Sa.left,id=Sn(Po).center,No=Oa;var Bt=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let i=this._partials,n=0;for(let r=0;r<this._n&&r<32;r++){let o=i[r],s=e+o,a=Math.abs(e)<Math.abs(o)?e-(s-o):o-(s-e);a&&(i[n++]=a),e=s}return i[n]=e,this._n=n+1,this}valueOf(){let e=this._partials,i=this._n,n,r,o,s=0;if(i>0){for(s=e[--i];i>0&&(n=s,r=e[--i],s=n+r,o=r-(s-n),!o););i>0&&(o<0&&e[i-1]<0||o>0&&e[i-1]>0)&&(r=o*2,n=s+r,r==n-s&&(s=n))}return s}};var pe=class extends Map{constructor(e,i=od){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),e!=null)for(let[n,r]of e)this.set(n,r)}get(e){return super.get(Ma(this,e))}has(e){return super.has(Ma(this,e))}set(e,i){return super.set(nd(this,e),i)}delete(e){return super.delete(rd(this,e))}};function Ma({_intern:t,_key:e},i){let n=e(i);return t.has(n)?t.get(n):i}function nd({_intern:t,_key:e},i){let n=e(i);return t.has(n)?t.get(n):(t.set(n,i),i)}function rd({_intern:t,_key:e},i){let n=e(i);return t.has(n)&&(i=t.get(n),t.delete(n)),i}function od(t){return t!==null&&typeof t=="object"?t.valueOf():t}function On(t){return t}function ti(t,...e){return sd(t,On,On,e)}function sd(t,e,i,n){return function r(o,s){if(s>=n.length)return i(o);let a=new pe,u=n[s++],c=-1;for(let l of o){let d=u(l,++c,o),h=a.get(d);h?h.push(l):a.set(d,[l])}for(let[l,d]of a)a.set(l,r(d,s));return e(a)}(t,0)}var ad=Math.sqrt(50),ld=Math.sqrt(10),cd=Math.sqrt(2);function Mn(t,e,i){let n=(e-t)/Math.max(0,i),r=Math.floor(Math.log10(n)),o=n/Math.pow(10,r),s=o>=ad?10:o>=ld?5:o>=cd?2:1,a,u,c;return r<0?(c=Math.pow(10,-r)/s,a=Math.round(t*c),u=Math.round(e*c),a/c<t&&++a,u/c>e&&--u,c=-c):(c=Math.pow(10,r)*s,a=Math.round(t/c),u=Math.round(e/c),a*c<t&&++a,u*c>e&&--u),u<a&&.5<=i&&i<2?Mn(t,e,i*2):[a,u,c]}function ei(t,e,i){if(e=+e,t=+t,i=+i,!(i>0))return[];if(t===e)return[t];let n=e<t,[r,o,s]=n?Mn(e,t,i):Mn(t,e,i);if(!(o>=r))return[];let a=o-r+1,u=new Array(a);if(n)if(s<0)for(let c=0;c<a;++c)u[c]=(o-c)/-s;else for(let c=0;c<a;++c)u[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)u[c]=(r+c)/-s;else for(let c=0;c<a;++c)u[c]=(r+c)*s;return u}function Ei(t,e,i){return e=+e,t=+t,i=+i,Mn(t,e,i)[2]}function ko(t,e,i){e=+e,t=+t,i=+i;let n=e<t,r=n?Ei(e,t,i):Ei(t,e,i);return(n?-1:1)*(r<0?1/-r:r)}function Ln(t,e){let i;if(e===void 0)for(let n of t)n!=null&&(i<n||i===void 0&&n>=n)&&(i=n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(i<r||i===void 0&&r>=r)&&(i=r)}return i}function*ud(t){for(let e of t)yield*Us(e)}function ii(t){return Array.from(ud(t))}function Rn(t,e,i){t=+t,e=+e,i=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+i;for(var n=-1,r=Math.max(0,Math.ceil((e-t)/i))|0,o=new Array(r);++n<r;)o[n]=t+n*i;return o}function La(t){return t}var So=1,Oo=2,Ra=3,Ai=4,Fa=1e-6;function dd(t){return"translate("+t+",0)"}function hd(t){return"translate(0,"+t+")"}function fd(t){return e=>+t(e)}function pd(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),i=>+t(i)+e}function md(){return!this.__axis}function gd(t,e){var i=[],n=null,r=null,o=6,s=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===So||t===Ai?-1:1,l=t===Ai||t===Oo?"x":"y",d=t===So||t===Ra?dd:hd;function h(f){var p=n??(e.ticks?e.ticks.apply(e,i):e.domain()),_=r??(e.tickFormat?e.tickFormat.apply(e,i):La),y=Math.max(o,0)+a,E=e.range(),C=+E[0]+u,N=+E[E.length-1]+u,A=(e.bandwidth?pd:fd)(e.copy(),u),k=f.selection?f.selection():f,M=k.selectAll(".domain").data([null]),L=k.selectAll(".tick").data(p,e).order(),R=L.exit(),F=L.enter().append("g").attr("class","tick"),I=L.select("line"),x=L.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),L=L.merge(F),I=I.merge(F.append("line").attr("stroke","currentColor").attr(l+"2",c*o)),x=x.merge(F.append("text").attr("fill","currentColor").attr(l,c*y).attr("dy",t===So?"0em":t===Ra?"0.71em":"0.32em")),f!==k&&(M=M.transition(f),L=L.transition(f),I=I.transition(f),x=x.transition(f),R=R.transition(f).attr("opacity",Fa).attr("transform",function(B){return isFinite(B=A(B))?d(B+u):this.getAttribute("transform")}),F.attr("opacity",Fa).attr("transform",function(B){var w=this.parentNode.__axis;return d((w&&isFinite(w=w(B))?w:A(B))+u)})),R.remove(),M.attr("d",t===Ai||t===Oo?s?"M"+c*s+","+C+"H"+u+"V"+N+"H"+c*s:"M"+u+","+C+"V"+N:s?"M"+C+","+c*s+"V"+u+"H"+N+"V"+c*s:"M"+C+","+u+"H"+N),L.attr("opacity",1).attr("transform",function(B){return d(A(B)+u)}),I.attr(l+"2",c*o),x.attr(l,c*y).text(_),k.filter(md).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Oo?"start":t===Ai?"end":"middle"),k.each(function(){this.__axis=A})}return h.scale=function(f){return arguments.length?(e=f,h):e},h.ticks=function(){return i=Array.from(arguments),h},h.tickArguments=function(f){return arguments.length?(i=f==null?[]:Array.from(f),h):i.slice()},h.tickValues=function(f){return arguments.length?(n=f==null?null:Array.from(f),h):n&&n.slice()},h.tickFormat=function(f){return arguments.length?(r=f,h):r},h.tickSize=function(f){return arguments.length?(o=s=+f,h):o},h.tickSizeInner=function(f){return arguments.length?(o=+f,h):o},h.tickSizeOuter=function(f){return arguments.length?(s=+f,h):s},h.tickPadding=function(f){return arguments.length?(a=+f,h):a},h.offset=function(f){return arguments.length?(u=+f,h):u},h}function Ci(t){return gd(Ai,t)}var _d={value:()=>{}};function Va(){for(var t=0,e=arguments.length,i={},n;t<e;++t){if(!(n=arguments[t]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new Fn(i)}function Fn(t){this._=t}function vd(t,e){return t.trim().split(/^|\s+/).map(function(i){var n="",r=i.indexOf(".");if(r>=0&&(n=i.slice(r+1),i=i.slice(0,r)),i&&!e.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:n}})}Fn.prototype=Va.prototype={constructor:Fn,on:function(t,e){var i=this._,n=vd(t+"",i),r,o=-1,s=n.length;if(arguments.length<2){for(;++o<s;)if((r=(t=n[o]).type)&&(r=yd(i[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=n[o]).type)i[r]=Ta(i[r],t.name,e);else if(e==null)for(r in i)i[r]=Ta(i[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new Fn(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var i=new Array(r),n=0,r,o;n<r;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,r=o.length;n<r;++n)o[n].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,o=n.length;r<o;++r)n[r].value.apply(e,i)}};function yd(t,e){for(var i=0,n=t.length,r;i<n;++i)if((r=t[i]).name===e)return r.value}function Ta(t,e,i){for(var n=0,r=t.length;n<r;++n)if(t[n].name===e){t[n]=_d,t=t.slice(0,n).concat(t.slice(n+1));break}return i!=null&&t.push({name:e,value:i}),t}var Mo=Va;var Tn="http://www.w3.org/1999/xhtml",Lo={svg:"http://www.w3.org/2000/svg",xhtml:Tn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function re(t){var e=t+="",i=e.indexOf(":");return i>=0&&(e=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),Lo.hasOwnProperty(e)?{space:Lo[e],local:t}:t}function xd(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===Tn&&e.documentElement.namespaceURI===Tn?e.createElement(t):e.createElementNS(i,t)}}function bd(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vn(t){var e=re(t);return(e.local?bd:xd)(e)}function wd(){}function Le(t){return t==null?wd:function(){return this.querySelector(t)}}function Ia(t){typeof t!="function"&&(t=Le(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var o=e[r],s=o.length,a=n[r]=new Array(s),u,c,l=0;l<s;++l)(u=o[l])&&(c=t.call(u,u.__data__,l,o))&&("__data__"in u&&(c.__data__=u.__data__),a[l]=c);return new nt(n,this._parents)}function Ro(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ed(){return[]}function Pi(t){return t==null?Ed:function(){return this.querySelectorAll(t)}}function Ad(t){return function(){return Ro(t.apply(this,arguments))}}function Ba(t){typeof t=="function"?t=Ad(t):t=Pi(t);for(var e=this._groups,i=e.length,n=[],r=[],o=0;o<i;++o)for(var s=e[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&(n.push(t.call(u,u.__data__,c,s)),r.push(u));return new nt(n,r)}function Ni(t){return function(){return this.matches(t)}}function In(t){return function(e){return e.matches(t)}}var Cd=Array.prototype.find;function Pd(t){return function(){return Cd.call(this.children,t)}}function Nd(){return this.firstElementChild}function Ga(t){return this.select(t==null?Nd:Pd(typeof t=="function"?t:In(t)))}var kd=Array.prototype.filter;function Sd(){return Array.from(this.children)}function Od(t){return function(){return kd.call(this.children,t)}}function Ha(t){return this.selectAll(t==null?Sd:Od(typeof t=="function"?t:In(t)))}function za(t){typeof t!="function"&&(t=Ni(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var o=e[r],s=o.length,a=n[r]=[],u,c=0;c<s;++c)(u=o[c])&&t.call(u,u.__data__,c,o)&&a.push(u);return new nt(n,this._parents)}function Bn(t){return new Array(t.length)}function Da(){return new nt(this._enter||this._groups.map(Bn),this._parents)}function ki(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ki.prototype={constructor:ki,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ya(t){return function(){return t}}function Md(t,e,i,n,r,o){for(var s=0,a,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],n[s]=a):i[s]=new ki(t,o[s]);for(;s<u;++s)(a=e[s])&&(r[s]=a)}function Ld(t,e,i,n,r,o,s){var a,u,c=new Map,l=e.length,d=o.length,h=new Array(l),f;for(a=0;a<l;++a)(u=e[a])&&(h[a]=f=s.call(u,u.__data__,a,e)+"",c.has(f)?r[a]=u:c.set(f,u));for(a=0;a<d;++a)f=s.call(t,o[a],a,o)+"",(u=c.get(f))?(n[a]=u,u.__data__=o[a],c.delete(f)):i[a]=new ki(t,o[a]);for(a=0;a<l;++a)(u=e[a])&&c.get(h[a])===u&&(r[a]=u)}function Rd(t){return t.__data__}function $a(t,e){if(!arguments.length)return Array.from(this,Rd);var i=e?Ld:Md,n=this._parents,r=this._groups;typeof t!="function"&&(t=Ya(t));for(var o=r.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var l=n[c],d=r[c],h=d.length,f=Fd(t.call(l,l&&l.__data__,c,n)),p=f.length,_=a[c]=new Array(p),y=s[c]=new Array(p),E=u[c]=new Array(h);i(l,d,_,y,E,f,e);for(var C=0,N=0,A,k;C<p;++C)if(A=_[C]){for(C>=N&&(N=C+1);!(k=y[N])&&++N<p;);A._next=k||null}}return s=new nt(s,n),s._enter=a,s._exit=u,s}function Fd(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ua(){return new nt(this._exit||this._groups.map(Bn),this._parents)}function ja(t,e,i){var n=this.enter(),r=this,o=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),i==null?o.remove():i(o),n&&r?n.merge(r).order():r}function Wa(t){for(var e=t.selection?t.selection():t,i=this._groups,n=e._groups,r=i.length,o=n.length,s=Math.min(r,o),a=new Array(r),u=0;u<s;++u)for(var c=i[u],l=n[u],d=c.length,h=a[u]=new Array(d),f,p=0;p<d;++p)(f=c[p]||l[p])&&(h[p]=f);for(;u<r;++u)a[u]=i[u];return new nt(a,this._parents)}function Xa(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n=t[e],r=n.length-1,o=n[r],s;--r>=0;)(s=n[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function qa(t){t||(t=Td);function e(d,h){return d&&h?t(d.__data__,h.__data__):!d-!h}for(var i=this._groups,n=i.length,r=new Array(n),o=0;o<n;++o){for(var s=i[o],a=s.length,u=r[o]=new Array(a),c,l=0;l<a;++l)(c=s[l])&&(u[l]=c);u.sort(e)}return new nt(r,this._parents).order()}function Td(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ka(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Za(){return Array.from(this)}function Ja(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,o=n.length;r<o;++r){var s=n[r];if(s)return s}return null}function Qa(){let t=0;for(let e of this)++t;return t}function tl(){return!this.node()}function el(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var r=e[i],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}function Vd(t){return function(){this.removeAttribute(t)}}function Id(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Bd(t,e){return function(){this.setAttribute(t,e)}}function Gd(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Hd(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function zd(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function il(t,e){var i=re(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((e==null?i.local?Id:Vd:typeof e=="function"?i.local?zd:Hd:i.local?Gd:Bd)(i,e))}function Gn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Dd(t){return function(){this.style.removeProperty(t)}}function Yd(t,e,i){return function(){this.style.setProperty(t,e,i)}}function $d(t,e,i){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function nl(t,e,i){return arguments.length>1?this.each((e==null?Dd:typeof e=="function"?$d:Yd)(t,e,i??"")):me(this.node(),t)}function me(t,e){return t.style.getPropertyValue(e)||Gn(t).getComputedStyle(t,null).getPropertyValue(e)}function Ud(t){return function(){delete this[t]}}function jd(t,e){return function(){this[t]=e}}function Wd(t,e){return function(){var i=e.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function rl(t,e){return arguments.length>1?this.each((e==null?Ud:typeof e=="function"?Wd:jd)(t,e)):this.node()[t]}function ol(t){return t.trim().split(/^|\s+/)}function Fo(t){return t.classList||new sl(t)}function sl(t){this._node=t,this._names=ol(t.getAttribute("class")||"")}sl.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function al(t,e){for(var i=Fo(t),n=-1,r=e.length;++n<r;)i.add(e[n])}function ll(t,e){for(var i=Fo(t),n=-1,r=e.length;++n<r;)i.remove(e[n])}function Xd(t){return function(){al(this,t)}}function qd(t){return function(){ll(this,t)}}function Kd(t,e){return function(){(e.apply(this,arguments)?al:ll)(this,t)}}function cl(t,e){var i=ol(t+"");if(arguments.length<2){for(var n=Fo(this.node()),r=-1,o=i.length;++r<o;)if(!n.contains(i[r]))return!1;return!0}return this.each((typeof e=="function"?Kd:e?Xd:qd)(i,e))}function Zd(){this.textContent=""}function Jd(t){return function(){this.textContent=t}}function Qd(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ul(t){return arguments.length?this.each(t==null?Zd:(typeof t=="function"?Qd:Jd)(t)):this.node().textContent}function th(){this.innerHTML=""}function eh(t){return function(){this.innerHTML=t}}function ih(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function dl(t){return arguments.length?this.each(t==null?th:(typeof t=="function"?ih:eh)(t)):this.node().innerHTML}function nh(){this.nextSibling&&this.parentNode.appendChild(this)}function hl(){return this.each(nh)}function rh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fl(){return this.each(rh)}function pl(t){var e=typeof t=="function"?t:Vn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function oh(){return null}function ml(t,e){var i=typeof t=="function"?t:Vn(t),n=e==null?oh:typeof e=="function"?e:Le(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})}function sh(){var t=this.parentNode;t&&t.removeChild(this)}function gl(){return this.each(sh)}function ah(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lh(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _l(t){return this.select(t?lh:ah)}function vl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ch(t){return function(e){t.call(this,e,this.__data__)}}function uh(t){return t.trim().split(/^|\s+/).map(function(e){var i="",n=e.indexOf(".");return n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),{type:e,name:i}})}function dh(t){return function(){var e=this.__on;if(e){for(var i=0,n=-1,r=e.length,o;i<r;++i)o=e[i],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++n]=o;++n?e.length=n:delete this.__on}}}function hh(t,e,i){return function(){var n=this.__on,r,o=ch(e);if(n){for(var s=0,a=n.length;s<a;++s)if((r=n[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=i),r.value=e;return}}this.addEventListener(t.type,o,i),r={type:t.type,name:t.name,value:e,listener:o,options:i},n?n.push(r):this.__on=[r]}}function yl(t,e,i){var n=uh(t+""),r,o=n.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,l;u<c;++u)for(r=0,l=a[u];r<o;++r)if((s=n[r]).type===l.type&&s.name===l.name)return l.value}return}for(a=e?hh:dh,r=0;r<o;++r)this.each(a(n[r],e,i));return this}function xl(t,e,i){var n=Gn(t),r=n.CustomEvent;typeof r=="function"?r=new r(e,i):(r=n.document.createEvent("Event"),i?(r.initEvent(e,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function fh(t,e){return function(){return xl(this,t,e)}}function ph(t,e){return function(){return xl(this,t,e.apply(this,arguments))}}function bl(t,e){return this.each((typeof e=="function"?ph:fh)(t,e))}function*wl(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,o=n.length,s;r<o;++r)(s=n[r])&&(yield s)}var To=[null];function nt(t,e){this._groups=t,this._parents=e}function El(){return new nt([[document.documentElement]],To)}function mh(){return this}nt.prototype=El.prototype={constructor:nt,select:Ia,selectAll:Ba,selectChild:Ga,selectChildren:Ha,filter:za,data:$a,enter:Da,exit:Ua,join:ja,merge:Wa,selection:mh,order:Xa,sort:qa,call:Ka,nodes:Za,node:Ja,size:Qa,empty:tl,each:el,attr:il,style:nl,property:rl,classed:cl,text:ul,html:dl,raise:hl,lower:fl,append:pl,insert:ml,remove:gl,clone:_l,datum:vl,on:yl,dispatch:bl,[Symbol.iterator]:wl};var oe=El;function se(t){return typeof t=="string"?new nt([[document.querySelector(t)]],[document.documentElement]):new nt([[t]],To)}function Hn(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function Vo(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function Mi(){}var Si=.7,Yn=1/Si,ni="\\s*([+-]?\\d+)\\s*",Oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gh=/^#([0-9a-f]{3,8})$/,_h=new RegExp(`^rgb\\(${ni},${ni},${ni}\\)$`),vh=new RegExp(`^rgb\\(${Jt},${Jt},${Jt}\\)$`),yh=new RegExp(`^rgba\\(${ni},${ni},${ni},${Oi}\\)$`),xh=new RegExp(`^rgba\\(${Jt},${Jt},${Jt},${Oi}\\)$`),bh=new RegExp(`^hsl\\(${Oi},${Jt},${Jt}\\)$`),wh=new RegExp(`^hsla\\(${Oi},${Jt},${Jt},${Oi}\\)$`),Al={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hn(Mi,Wt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cl,formatHex:Cl,formatHex8:Eh,formatHsl:Ah,formatRgb:Pl,toString:Pl});function Cl(){return this.rgb().formatHex()}function Eh(){return this.rgb().formatHex8()}function Ah(){return Ll(this).formatHsl()}function Pl(){return this.rgb().formatRgb()}function Wt(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=gh.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Nl(e):i===3?new Tt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?zn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?zn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_h.exec(t))?new Tt(e[1],e[2],e[3],1):(e=vh.exec(t))?new Tt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yh.exec(t))?zn(e[1],e[2],e[3],e[4]):(e=xh.exec(t))?zn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bh.exec(t))?Ol(e[1],e[2]/100,e[3]/100,1):(e=wh.exec(t))?Ol(e[1],e[2]/100,e[3]/100,e[4]):Al.hasOwnProperty(t)?Nl(Al[t]):t==="transparent"?new Tt(NaN,NaN,NaN,0):null}function Nl(t){return new Tt(t>>16&255,t>>8&255,t&255,1)}function zn(t,e,i,n){return n<=0&&(t=e=i=NaN),new Tt(t,e,i,n)}function Ch(t){return t instanceof Mi||(t=Wt(t)),t?(t=t.rgb(),new Tt(t.r,t.g,t.b,t.opacity)):new Tt}function ri(t,e,i,n){return arguments.length===1?Ch(t):new Tt(t,e,i,n??1)}function Tt(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}Hn(Tt,ri,Vo(Mi,{brighter(t){return t=t==null?Yn:Math.pow(Yn,t),new Tt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Si:Math.pow(Si,t),new Tt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Tt(Fe(this.r),Fe(this.g),Fe(this.b),$n(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kl,formatHex:kl,formatHex8:Ph,formatRgb:Sl,toString:Sl}));function kl(){return`#${Re(this.r)}${Re(this.g)}${Re(this.b)}`}function Ph(){return`#${Re(this.r)}${Re(this.g)}${Re(this.b)}${Re((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sl(){let t=$n(this.opacity);return`${t===1?"rgb(":"rgba("}${Fe(this.r)}, ${Fe(this.g)}, ${Fe(this.b)}${t===1?")":`, ${t})`}`}function $n(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Fe(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Re(t){return t=Fe(t),(t<16?"0":"")+t.toString(16)}function Ol(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new jt(t,e,i,n)}function Ll(t){if(t instanceof jt)return new jt(t.h,t.s,t.l,t.opacity);if(t instanceof Mi||(t=Wt(t)),!t)return new jt;if(t instanceof jt)return t;t=t.rgb();var e=t.r/255,i=t.g/255,n=t.b/255,r=Math.min(e,i,n),o=Math.max(e,i,n),s=NaN,a=o-r,u=(o+r)/2;return a?(e===o?s=(i-n)/a+(i<n)*6:i===o?s=(n-e)/a+2:s=(e-i)/a+4,a/=u<.5?o+r:2-o-r,s*=60):a=u>0&&u<1?0:s,new jt(s,a,u,t.opacity)}function Rl(t,e,i,n){return arguments.length===1?Ll(t):new jt(t,e,i,n??1)}function jt(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}Hn(jt,Rl,Vo(Mi,{brighter(t){return t=t==null?Yn:Math.pow(Yn,t),new jt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Si:Math.pow(Si,t),new jt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,r=2*i-n;return new Tt(Io(t>=240?t-240:t+120,r,n),Io(t,r,n),Io(t<120?t+240:t-120,r,n),this.opacity)},clamp(){return new jt(Ml(this.h),Dn(this.s),Dn(this.l),$n(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=$n(this.opacity);return`${t===1?"hsl(":"hsla("}${Ml(this.h)}, ${Dn(this.s)*100}%, ${Dn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ml(t){return t=(t||0)%360,t<0?t+360:t}function Dn(t){return Math.max(0,Math.min(1,t||0))}function Io(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function Bo(t,e,i,n,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*i+(1+3*t+3*o-3*s)*n+s*r)/6}function Fl(t){var e=t.length-1;return function(i){var n=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),r=t[n],o=t[n+1],s=n>0?t[n-1]:2*r-o,a=n<e-1?t[n+2]:2*o-r;return Bo((i-n/e)*e,s,r,o,a)}}function Tl(t){var e=t.length;return function(i){var n=Math.floor(((i%=1)<0?++i:i)*e),r=t[(n+e-1)%e],o=t[n%e],s=t[(n+1)%e],a=t[(n+2)%e];return Bo((i-n/e)*e,r,o,s,a)}}var Li=t=>()=>t;function Nh(t,e){return function(i){return t+i*e}}function kh(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}function Vl(t){return(t=+t)==1?Un:function(e,i){return i-e?kh(e,i,t):Li(isNaN(e)?i:e)}}function Un(t,e){var i=e-t;return i?Nh(t,i):Li(isNaN(t)?e:t)}var Te=function t(e){var i=Vl(e);function n(r,o){var s=i((r=ri(r)).r,(o=ri(o)).r),a=i(r.g,o.g),u=i(r.b,o.b),c=Un(r.opacity,o.opacity);return function(l){return r.r=s(l),r.g=a(l),r.b=u(l),r.opacity=c(l),r+""}}return n.gamma=t,n}(1);function Il(t){return function(e){var i=e.length,n=new Array(i),r=new Array(i),o=new Array(i),s,a;for(s=0;s<i;++s)a=ri(e[s]),n[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return n=t(n),r=t(r),o=t(o),a.opacity=1,function(u){return a.r=n(u),a.g=r(u),a.b=o(u),a+""}}}var Sh=Il(Fl),Oh=Il(Tl);function Bl(t,e){e||(e=[]);var i=t?Math.min(e.length,t.length):0,n=e.slice(),r;return function(o){for(r=0;r<i;++r)n[r]=t[r]*(1-o)+e[r]*o;return n}}function Gl(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Hl(t,e){var i=e?e.length:0,n=t?Math.min(i,t.length):0,r=new Array(n),o=new Array(i),s;for(s=0;s<n;++s)r[s]=ae(t[s],e[s]);for(;s<i;++s)o[s]=e[s];return function(a){for(s=0;s<n;++s)o[s]=r[s](a);return o}}function zl(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}function gt(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function Dl(t,e){var i={},n={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?i[r]=ae(t[r],e[r]):n[r]=e[r];return function(o){for(r in i)n[r]=i[r](o);return n}}var Ho=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Go=new RegExp(Ho.source,"g");function Mh(t){return function(){return t}}function Lh(t){return function(e){return t(e)+""}}function Ri(t,e){var i=Ho.lastIndex=Go.lastIndex=0,n,r,o,s=-1,a=[],u=[];for(t=t+"",e=e+"";(n=Ho.exec(t))&&(r=Go.exec(e));)(o=r.index)>i&&(o=e.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:gt(n,r)})),i=Go.lastIndex;return i<e.length&&(o=e.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Lh(u[0].x):Mh(e):(e=u.length,function(c){for(var l=0,d;l<e;++l)a[(d=u[l]).i]=d.x(c);return a.join("")})}function ae(t,e){var i=typeof e,n;return e==null||i==="boolean"?Li(e):(i==="number"?gt:i==="string"?(n=Wt(e))?(e=n,Te):Ri:e instanceof Wt?Te:e instanceof Date?zl:Gl(e)?Bl:Array.isArray(e)?Hl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Dl:gt)(t,e)}function zo(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var Yl=180/Math.PI,jn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Do(t,e,i,n,r,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*i+e*n)&&(i-=t*u,n-=e*u),(a=Math.sqrt(i*i+n*n))&&(i/=a,n/=a,u/=a),t*n<e*i&&(t=-t,e=-e,u=-u,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Yl,skewX:Math.atan(u)*Yl,scaleX:s,scaleY:a}}var Wn;function $l(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?jn:Do(e.a,e.b,e.c,e.d,e.e,e.f)}function Ul(t){return t==null?jn:(Wn||(Wn=document.createElementNS("http://www.w3.org/2000/svg","g")),Wn.setAttribute("transform",t),(t=Wn.transform.baseVal.consolidate())?(t=t.matrix,Do(t.a,t.b,t.c,t.d,t.e,t.f)):jn)}function jl(t,e,i,n){function r(c){return c.length?c.pop()+" ":""}function o(c,l,d,h,f,p){if(c!==d||l!==h){var _=f.push("translate(",null,e,null,i);p.push({i:_-4,x:gt(c,d)},{i:_-2,x:gt(l,h)})}else(d||h)&&f.push("translate("+d+e+h+i)}function s(c,l,d,h){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),h.push({i:d.push(r(d)+"rotate(",null,n)-2,x:gt(c,l)})):l&&d.push(r(d)+"rotate("+l+n)}function a(c,l,d,h){c!==l?h.push({i:d.push(r(d)+"skewX(",null,n)-2,x:gt(c,l)}):l&&d.push(r(d)+"skewX("+l+n)}function u(c,l,d,h,f,p){if(c!==d||l!==h){var _=f.push(r(f)+"scale(",null,",",null,")");p.push({i:_-4,x:gt(c,d)},{i:_-2,x:gt(l,h)})}else(d!==1||h!==1)&&f.push(r(f)+"scale("+d+","+h+")")}return function(c,l){var d=[],h=[];return c=t(c),l=t(l),o(c.translateX,c.translateY,l.translateX,l.translateY,d,h),s(c.rotate,l.rotate,d,h),a(c.skewX,l.skewX,d,h),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,d,h),c=l=null,function(f){for(var p=-1,_=h.length,y;++p<_;)d[(y=h[p]).i]=y.x(f);return d.join("")}}}var Yo=jl($l,"px, ","px)","deg)"),$o=jl(Ul,", ",")",")");var oi=0,Ti=0,Fi=0,Xl=1e3,Xn,Vi,qn=0,Ve=0,Kn=0,Ii=typeof performance=="object"&&performance.now?performance:Date,ql=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Gi(){return Ve||(ql(Rh),Ve=Ii.now()+Kn)}function Rh(){Ve=0}function Bi(){this._call=this._time=this._next=null}Bi.prototype=Zn.prototype={constructor:Bi,restart:function(t,e,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?Gi():+i)+(e==null?0:+e),!this._next&&Vi!==this&&(Vi?Vi._next=this:Xn=this,Vi=this),this._call=t,this._time=i,Uo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uo())}};function Zn(t,e,i){var n=new Bi;return n.restart(t,e,i),n}function Kl(){Gi(),++oi;for(var t=Xn,e;t;)(e=Ve-t._time)>=0&&t._call.call(void 0,e),t=t._next;--oi}function Wl(){Ve=(qn=Ii.now())+Kn,oi=Ti=0;try{Kl()}finally{oi=0,Th(),Ve=0}}function Fh(){var t=Ii.now(),e=t-qn;e>Xl&&(Kn-=e,qn=t)}function Th(){for(var t,e=Xn,i,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(i=e._next,e._next=null,e=t?t._next=i:Xn=i);Vi=t,Uo(n)}function Uo(t){if(!oi){Ti&&(Ti=clearTimeout(Ti));var e=t-Ve;e>24?(t<1/0&&(Ti=setTimeout(Wl,t-Ii.now()-Kn)),Fi&&(Fi=clearInterval(Fi))):(Fi||(qn=Ii.now(),Fi=setInterval(Fh,Xl)),oi=1,ql(Wl))}}function Jn(t,e,i){var n=new Bi;return e=e==null?0:+e,n.restart(r=>{n.stop(),t(r+e)},e,i),n}var Vh=Mo("start","end","cancel","interrupt"),Ih=[],Ql=0,Zl=1,tr=2,Qn=3,Jl=4,er=5,Hi=6;function ge(t,e,i,n,r,o){var s=t.__transition;if(!s)t.__transition={};else if(i in s)return;Bh(t,i,{name:e,index:n,group:r,on:Vh,tween:Ih,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ql})}function zi(t,e){var i=ct(t,e);if(i.state>Ql)throw new Error("too late; already scheduled");return i}function _t(t,e){var i=ct(t,e);if(i.state>Qn)throw new Error("too late; already running");return i}function ct(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function Bh(t,e,i){var n=t.__transition,r;n[e]=i,i.timer=Zn(o,0,i.time);function o(c){i.state=Zl,i.timer.restart(s,i.delay,i.time),i.delay<=c&&s(c-i.delay)}function s(c){var l,d,h,f;if(i.state!==Zl)return u();for(l in n)if(f=n[l],f.name===i.name){if(f.state===Qn)return Jn(s);f.state===Jl?(f.state=Hi,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete n[l]):+l<e&&(f.state=Hi,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete n[l])}if(Jn(function(){i.state===Qn&&(i.state=Jl,i.timer.restart(a,i.delay,i.time),a(c))}),i.state=tr,i.on.call("start",t,t.__data__,i.index,i.group),i.state===tr){for(i.state=Qn,r=new Array(h=i.tween.length),l=0,d=-1;l<h;++l)(f=i.tween[l].value.call(t,t.__data__,i.index,i.group))&&(r[++d]=f);r.length=d+1}}function a(c){for(var l=c<i.duration?i.ease.call(null,c/i.duration):(i.timer.restart(u),i.state=er,1),d=-1,h=r.length;++d<h;)r[d].call(t,l);i.state===er&&(i.on.call("end",t,t.__data__,i.index,i.group),u())}function u(){i.state=Hi,i.timer.stop(),delete n[e];for(var c in n)return;delete t.__transition}}function ir(t,e){var i=t.__transition,n,r,o=!0,s;if(i){e=e==null?null:e+"";for(s in i){if((n=i[s]).name!==e){o=!1;continue}r=n.state>tr&&n.state<er,n.state=Hi,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[s]}o&&delete t.__transition}}function tc(t){return this.each(function(){ir(this,t)})}function Gh(t,e){var i,n;return function(){var r=_t(this,t),o=r.tween;if(o!==i){n=i=o;for(var s=0,a=n.length;s<a;++s)if(n[s].name===e){n=n.slice(),n.splice(s,1);break}}r.tween=n}}function Hh(t,e,i){var n,r;if(typeof i!="function")throw new Error;return function(){var o=_t(this,t),s=o.tween;if(s!==n){r=(n=s).slice();for(var a={name:e,value:i},u=0,c=r.length;u<c;++u)if(r[u].name===e){r[u]=a;break}u===c&&r.push(a)}o.tween=r}}function ec(t,e){var i=this._id;if(t+="",arguments.length<2){for(var n=ct(this.node(),i).tween,r=0,o=n.length,s;r<o;++r)if((s=n[r]).name===t)return s.value;return null}return this.each((e==null?Gh:Hh)(i,t,e))}function si(t,e,i){var n=t._id;return t.each(function(){var r=_t(this,n);(r.value||(r.value={}))[e]=i.apply(this,arguments)}),function(r){return ct(r,n).value[e]}}function nr(t,e){var i;return(typeof e=="number"?gt:e instanceof Wt?Te:(i=Wt(e))?(e=i,Te):Ri)(t,e)}function zh(t){return function(){this.removeAttribute(t)}}function Dh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yh(t,e,i){var n,r=i+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===n?o:o=e(n=s,i)}}function $h(t,e,i){var n,r=i+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===n?o:o=e(n=s,i)}}function Uh(t,e,i){var n,r,o;return function(){var s,a=i(this),u;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=a+"",s===u?null:s===n&&u===r?o:(r=u,o=e(n=s,a)))}}function jh(t,e,i){var n,r,o;return function(){var s,a=i(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=a+"",s===u?null:s===n&&u===r?o:(r=u,o=e(n=s,a)))}}function ic(t,e){var i=re(t),n=i==="transform"?$o:nr;return this.attrTween(t,typeof e=="function"?(i.local?jh:Uh)(i,n,si(this,"attr."+t,e)):e==null?(i.local?Dh:zh)(i):(i.local?$h:Yh)(i,n,e))}function Wh(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}function Xh(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}function qh(t,e){var i,n;function r(){var o=e.apply(this,arguments);return o!==n&&(i=(n=o)&&Xh(t,o)),i}return r._value=e,r}function Kh(t,e){var i,n;function r(){var o=e.apply(this,arguments);return o!==n&&(i=(n=o)&&Wh(t,o)),i}return r._value=e,r}function nc(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;var n=re(t);return this.tween(i,(n.local?qh:Kh)(n,e))}function Zh(t,e){return function(){zi(this,t).delay=+e.apply(this,arguments)}}function Jh(t,e){return e=+e,function(){zi(this,t).delay=e}}function rc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zh:Jh)(e,t)):ct(this.node(),e).delay}function Qh(t,e){return function(){_t(this,t).duration=+e.apply(this,arguments)}}function tf(t,e){return e=+e,function(){_t(this,t).duration=e}}function oc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qh:tf)(e,t)):ct(this.node(),e).duration}function ef(t,e){if(typeof e!="function")throw new Error;return function(){_t(this,t).ease=e}}function sc(t){var e=this._id;return arguments.length?this.each(ef(e,t)):ct(this.node(),e).ease}function nf(t,e){return function(){var i=e.apply(this,arguments);if(typeof i!="function")throw new Error;_t(this,t).ease=i}}function ac(t){if(typeof t!="function")throw new Error;return this.each(nf(this._id,t))}function lc(t){typeof t!="function"&&(t=Ni(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var o=e[r],s=o.length,a=n[r]=[],u,c=0;c<s;++c)(u=o[c])&&t.call(u,u.__data__,c,o)&&a.push(u);return new Ot(n,this._parents,this._name,this._id)}function cc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,n=e.length,r=i.length,o=Math.min(n,r),s=new Array(n),a=0;a<o;++a)for(var u=e[a],c=i[a],l=u.length,d=s[a]=new Array(l),h,f=0;f<l;++f)(h=u[f]||c[f])&&(d[f]=h);for(;a<n;++a)s[a]=e[a];return new Ot(s,this._parents,this._name,this._id)}function rf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var i=e.indexOf(".");return i>=0&&(e=e.slice(0,i)),!e||e==="start"})}function of(t,e,i){var n,r,o=rf(e)?zi:_t;return function(){var s=o(this,t),a=s.on;a!==n&&(r=(n=a).copy()).on(e,i),s.on=r}}function uc(t,e){var i=this._id;return arguments.length<2?ct(this.node(),i).on.on(t):this.each(of(i,t,e))}function sf(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}}function dc(){return this.on("end.remove",sf(this._id))}function hc(t){var e=this._name,i=this._id;typeof t!="function"&&(t=Le(t));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var a=n[s],u=a.length,c=o[s]=new Array(u),l,d,h=0;h<u;++h)(l=a[h])&&(d=t.call(l,l.__data__,h,a))&&("__data__"in l&&(d.__data__=l.__data__),c[h]=d,ge(c[h],e,i,h,c,ct(l,i)));return new Ot(o,this._parents,e,i)}function fc(t){var e=this._name,i=this._id;typeof t!="function"&&(t=Pi(t));for(var n=this._groups,r=n.length,o=[],s=[],a=0;a<r;++a)for(var u=n[a],c=u.length,l,d=0;d<c;++d)if(l=u[d]){for(var h=t.call(l,l.__data__,d,u),f,p=ct(l,i),_=0,y=h.length;_<y;++_)(f=h[_])&&ge(f,e,i,_,h,p);o.push(h),s.push(l)}return new Ot(o,s,e,i)}var af=oe.prototype.constructor;function pc(){return new af(this._groups,this._parents)}function lf(t,e){var i,n,r;return function(){var o=me(this,t),s=(this.style.removeProperty(t),me(this,t));return o===s?null:o===i&&s===n?r:r=e(i=o,n=s)}}function mc(t){return function(){this.style.removeProperty(t)}}function cf(t,e,i){var n,r=i+"",o;return function(){var s=me(this,t);return s===r?null:s===n?o:o=e(n=s,i)}}function uf(t,e,i){var n,r,o;return function(){var s=me(this,t),a=i(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),me(this,t))),s===u?null:s===n&&u===r?o:(r=u,o=e(n=s,a))}}function df(t,e){var i,n,r,o="style."+e,s="end."+o,a;return function(){var u=_t(this,t),c=u.on,l=u.value[o]==null?a||(a=mc(e)):void 0;(c!==i||r!==l)&&(n=(i=c).copy()).on(s,r=l),u.on=n}}function gc(t,e,i){var n=(t+="")=="transform"?Yo:nr;return e==null?this.styleTween(t,lf(t,n)).on("end.style."+t,mc(t)):typeof e=="function"?this.styleTween(t,uf(t,n,si(this,"style."+t,e))).each(df(this._id,t)):this.styleTween(t,cf(t,n,e),i).on("end.style."+t,null)}function hf(t,e,i){return function(n){this.style.setProperty(t,e.call(this,n),i)}}function ff(t,e,i){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&hf(t,s,i)),n}return o._value=e,o}function _c(t,e,i){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,ff(t,e,i??""))}function pf(t){return function(){this.textContent=t}}function mf(t){return function(){var e=t(this);this.textContent=e??""}}function vc(t){return this.tween("text",typeof t=="function"?mf(si(this,"text",t)):pf(t==null?"":t+""))}function gf(t){return function(e){this.textContent=t.call(this,e)}}function _f(t){var e,i;function n(){var r=t.apply(this,arguments);return r!==i&&(e=(i=r)&&gf(r)),e}return n._value=t,n}function yc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,_f(t))}function xc(){for(var t=this._name,e=this._id,i=rr(),n=this._groups,r=n.length,o=0;o<r;++o)for(var s=n[o],a=s.length,u,c=0;c<a;++c)if(u=s[c]){var l=ct(u,e);ge(u,t,i,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ot(n,this._parents,t,i)}function bc(){var t,e,i=this,n=i._id,r=i.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--r===0&&o()}};i.each(function(){var c=_t(this,n),l=c.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),c.on=e}),r===0&&o()})}var vf=0;function Ot(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function wc(t){return oe().transition(t)}function rr(){return++vf}var le=oe.prototype;Ot.prototype=wc.prototype={constructor:Ot,select:hc,selectAll:fc,selectChild:le.selectChild,selectChildren:le.selectChildren,filter:lc,merge:cc,selection:pc,transition:xc,call:le.call,nodes:le.nodes,node:le.node,size:le.size,empty:le.empty,each:le.each,on:uc,attr:ic,attrTween:nc,style:gc,styleTween:_c,text:vc,textTween:yc,remove:dc,tween:ec,delay:rc,duration:oc,ease:sc,easeVarying:ac,end:bc,[Symbol.iterator]:le[Symbol.iterator]};function or(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var yf={time:null,delay:0,duration:250,ease:or};function xf(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}function Ec(t){var e,i;t instanceof Ot?(e=t._id,t=t._name):(e=rr(),(i=yf).time=Gi(),t=t==null?null:t+"");for(var n=this._groups,r=n.length,o=0;o<r;++o)for(var s=n[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&ge(u,t,e,c,s,i||xf(u,e));return new Ot(n,this._parents,t,e)}oe.prototype.interrupt=tc;oe.prototype.transition=Ec;var{abs:Lb,max:Rb,min:Fb}=Math;function Ac(t){return[+t[0],+t[1]]}function bf(t){return[Ac(t[0]),Ac(t[1])]}var Tb={name:"x",handles:["w","e"].map(jo),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Vb={name:"y",handles:["n","s"].map(jo),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ib={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(jo),input:function(t){return t==null?null:bf(t)},output:function(t){return t}};function jo(t){return{type:t}}var Wo=Math.PI,Xo=2*Wo,Ie=1e-6,wf=Xo-Ie;function Cc(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function Ef(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Cc;let i=10**e;return function(n){this._+=n[0];for(let r=1,o=n.length;r<o;++r)this._+=Math.round(arguments[r]*i)/i+n[r]}}var Be=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Cc:Ef(e)}moveTo(e,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,i){this._append`L${this._x1=+e},${this._y1=+i}`}quadraticCurveTo(e,i,n,r){this._append`Q${+e},${+i},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,i,n,r,o,s){this._append`C${+e},${+i},${+n},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(e,i,n,r,o){if(e=+e,i=+i,n=+n,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=n-e,c=r-i,l=s-e,d=a-i,h=l*l+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=i}`;else if(h>Ie)if(!(Math.abs(d*u-c*l)>Ie)||!o)this._append`L${this._x1=e},${this._y1=i}`;else{let f=n-s,p=r-a,_=u*u+c*c,y=f*f+p*p,E=Math.sqrt(_),C=Math.sqrt(h),N=o*Math.tan((Wo-Math.acos((_+h-y)/(2*E*C)))/2),A=N/C,k=N/E;Math.abs(A-1)>Ie&&this._append`L${e+A*l},${i+A*d}`,this._append`A${o},${o},0,0,${+(d*f>l*p)},${this._x1=e+k*u},${this._y1=i+k*c}`}}arc(e,i,n,r,o,s){if(e=+e,i=+i,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),u=n*Math.sin(r),c=e+a,l=i+u,d=1^s,h=s?r-o:o-r;this._x1===null?this._append`M${c},${l}`:(Math.abs(this._x1-c)>Ie||Math.abs(this._y1-l)>Ie)&&this._append`L${c},${l}`,n&&(h<0&&(h=h%Xo+Xo),h>wf?this._append`A${n},${n},0,1,${d},${e-a},${i-u}A${n},${n},0,1,${d},${this._x1=c},${this._y1=l}`:h>Ie&&this._append`A${n},${n},0,${+(h>=Wo)},${d},${this._x1=e+n*Math.cos(o)},${this._y1=i+n*Math.sin(o)}`)}rect(e,i,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function Pc(){return new Be}Pc.prototype=Be.prototype;function Nc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ge(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function Qt(t){return t=Ge(Math.abs(t)),t?t[1]:NaN}function kc(t,e){return function(i,n){for(var r=i.length,o=[],s=0,a=t[0],u=0;r>0&&a>0&&(u+a+1>n&&(a=Math.max(1,n-u)),o.push(i.substring(r-=a,r+a)),!((u+=a+1)>n));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function Sc(t){return function(e){return e.replace(/[0-9]/g,function(i){return t[+i]})}}var Af=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _e(t){if(!(e=Af.exec(t)))throw new Error("invalid format: "+t);var e;return new sr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}_e.prototype=sr.prototype;function sr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}sr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Oc(t){t:for(var e=t.length,i=1,n=-1,r;i<e;++i)switch(t[i]){case".":n=r=i;break;case"0":n===0&&(n=i),r=i;break;default:if(!+t[i])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(r+1):t}var qo;function Mc(t,e){var i=Ge(t,e);if(!i)return t+"";var n=i[0],r=i[1],o=r-(qo=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Ge(t,Math.max(0,e+o-1))[0]}function Ko(t,e){var i=Ge(t,e);if(!i)return t+"";var n=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}var Zo={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Nc,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ko(t*100,e),r:Ko,s:Mc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Jo(t){return t}var Lc=Array.prototype.map,Rc=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Fc(t){var e=t.grouping===void 0||t.thousands===void 0?Jo:kc(Lc.call(t.grouping,Number),t.thousands+""),i=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Jo:Sc(Lc.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=_e(d);var h=d.fill,f=d.align,p=d.sign,_=d.symbol,y=d.zero,E=d.width,C=d.comma,N=d.precision,A=d.trim,k=d.type;k==="n"?(C=!0,k="g"):Zo[k]||(N===void 0&&(N=12),A=!0,k="g"),(y||h==="0"&&f==="=")&&(y=!0,h="0",f="=");var M=_==="$"?i:_==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",L=_==="$"?n:/[%p]/.test(k)?s:"",R=Zo[k],F=/[defgprs%]/.test(k);N=N===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function I(x){var B=M,w=L,S,v,T;if(k==="c")w=R(x)+w,x="";else{x=+x;var U=x<0||1/x<0;if(x=isNaN(x)?u:R(Math.abs(x),N),A&&(x=Oc(x)),U&&+x==0&&p!=="+"&&(U=!1),B=(U?p==="("?p:a:p==="-"||p==="("?"":p)+B,w=(k==="s"?Rc[8+qo/3]:"")+w+(U&&p==="("?")":""),F){for(S=-1,v=x.length;++S<v;)if(T=x.charCodeAt(S),48>T||T>57){w=(T===46?r+x.slice(S+1):x.slice(S))+w,x=x.slice(0,S);break}}}C&&!y&&(x=e(x,1/0));var J=B.length+x.length+w.length,X=J<E?new Array(E-J+1).join(h):"";switch(C&&y&&(x=e(X+x,X.length?E-w.length:1/0),X=""),f){case"<":x=B+x+w+X;break;case"=":x=B+X+x+w;break;case"^":x=X.slice(0,J=X.length>>1)+B+x+w+X.slice(J);break;default:x=X+B+x+w;break}return o(x)}return I.toString=function(){return d+""},I}function l(d,h){var f=c((d=_e(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(Qt(h)/3)))*3,_=Math.pow(10,-p),y=Rc[8+p/3];return function(E){return f(_*E)+y}}return{format:c,formatPrefix:l}}var ar,lr,cr;Qo({thousands:",",grouping:[3],currency:["$",""]});function Qo(t){return ar=Fc(t),lr=ar.format,cr=ar.formatPrefix,ar}function ts(t){return Math.max(0,-Qt(Math.abs(t)))}function es(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qt(e)/3)))*3-Qt(Math.abs(t)))}function is(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Qt(e)-Qt(t))+1}var Y=1e-6,Tc=1e-12,H=Math.PI,ht=H/2,ns=H/4,ft=H*2,Ct=180/H,tt=H/180,$=Math.abs,ur=Math.atan,ce=Math.atan2,j=Math.cos;var Vc=Math.exp;var Ic=Math.log;var Z=Math.sin,Bc=Math.sign||function(t){return t>0?1:t<0?-1:0},Gt=Math.sqrt,Gc=Math.tan;function Hc(t){return t>1?0:t<-1?H:Math.acos(t)}function ue(t){return t>1?ht:t<-1?-ht:Math.asin(t)}function pt(){}function dr(t,e){t&&Dc.hasOwnProperty(t.type)&&Dc[t.type](t,e)}var zc={Feature:function(t,e){dr(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,r=i.length;++n<r;)dr(i[n].geometry,e)}},Dc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){rs(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)rs(i[n],e,0)},Polygon:function(t,e){Yc(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)Yc(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,r=i.length;++n<r;)dr(i[n],e)}};function rs(t,e,i){var n=-1,r=t.length-i,o;for(e.lineStart();++n<r;)o=t[n],e.point(o[0],o[1],o[2]);e.lineEnd()}function Yc(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)rs(t[i],e,1);e.polygonEnd()}function ve(t,e){t&&zc.hasOwnProperty(t.type)?zc[t.type](t,e):dr(t,e)}function Di(t){return[ce(t[1],t[0]),ue(t[2])]}function te(t){var e=t[0],i=t[1],n=j(i);return[n*j(e),n*Z(e),Z(i)]}function Yi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ai(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function hr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function $i(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ui(t){var e=Gt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ji(t,e){function i(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(i.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),i}function os(t,e){return $(t)>H&&(t-=Math.round(t/ft)*ft),[t,e]}os.invert=os;function ss(t,e,i){return(t%=ft)?e||i?ji(Uc(t),jc(e,i)):Uc(t):e||i?jc(e,i):os}function $c(t){return function(e,i){return e+=t,$(e)>H&&(e-=Math.round(e/ft)*ft),[e,i]}}function Uc(t){var e=$c(t);return e.invert=$c(-t),e}function jc(t,e){var i=j(t),n=Z(t),r=j(e),o=Z(e);function s(a,u){var c=j(u),l=j(a)*c,d=Z(a)*c,h=Z(u),f=h*i+l*n;return[ce(d*r-f*o,l*i-h*n),ue(f*r+d*o)]}return s.invert=function(a,u){var c=j(u),l=j(a)*c,d=Z(a)*c,h=Z(u),f=h*r-d*o;return[ce(d*r+h*o,l*i+f*n),ue(f*i-l*n)]},s}function Wc(t){t=ss(t[0]*tt,t[1]*tt,t.length>2?t[2]*tt:0);function e(i){return i=t(i[0]*tt,i[1]*tt),i[0]*=Ct,i[1]*=Ct,i}return e.invert=function(i){return i=t.invert(i[0]*tt,i[1]*tt),i[0]*=Ct,i[1]*=Ct,i},e}function qc(t,e,i,n,r,o){if(i){var s=j(e),a=Z(e),u=n*i;r==null?(r=e+n*ft,o=e-u/2):(r=Xc(s,r),o=Xc(s,o),(n>0?r<o:r>o)&&(r+=n*ft));for(var c,l=r;n>0?l>o:l<o;l-=u)c=Di([s,-a*j(l),-a*Z(l)]),t.point(c[0],c[1])}}function Xc(t,e){e=te(e),e[0]-=t,Ui(e);var i=Hc(-e[1]);return((-e[2]<0?-i:i)+ft-Y)%ft}function fr(){var t=[],e;return{point:function(i,n,r){e.push([i,n,r])},lineStart:function(){t.push(e=[])},lineEnd:pt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],e=null,i}}}function li(t,e){return $(t[0]-e[0])<Y&&$(t[1]-e[1])<Y}function pr(t,e,i,n){this.x=t,this.z=e,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function mr(t,e,i,n,r){var o=[],s=[],a,u;if(t.forEach(function(p){if(!((_=p.length-1)<=0)){var _,y=p[0],E=p[_],C;if(li(y,E)){if(!y[2]&&!E[2]){for(r.lineStart(),a=0;a<_;++a)r.point((y=p[a])[0],y[1]);r.lineEnd();return}E[0]+=2*Y}o.push(C=new pr(y,p,null,!0)),s.push(C.o=new pr(y,null,C,!1)),o.push(C=new pr(E,p,null,!1)),s.push(C.o=new pr(E,null,C,!0))}}),!!o.length){for(s.sort(e),Kc(o),Kc(s),a=0,u=s.length;a<u;++a)s[a].e=i=!i;for(var c=o[0],l,d;;){for(var h=c,f=!0;h.v;)if((h=h.n)===c)return;l=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(a=0,u=l.length;a<u;++a)r.point((d=l[a])[0],d[1]);else n(h.x,h.n.x,1,r);h=h.n}else{if(f)for(l=h.p.z,a=l.length-1;a>=0;--a)r.point((d=l[a])[0],d[1]);else n(h.x,h.p.x,-1,r);h=h.p}h=h.o,l=h.z,f=!f}while(!h.v);r.lineEnd()}}}function Kc(t){if(e=t.length){for(var e,i=0,n=t[0],r;++i<e;)n.n=r=t[i],r.p=n,n=r;n.n=r=t[0],r.p=n}}function as(t){return $(t[0])<=H?t[0]:Bc(t[0])*(($(t[0])+H)%ft-H)}function Zc(t,e){var i=as(e),n=e[1],r=Z(n),o=[Z(i),-j(i),0],s=0,a=0,u=new Bt;r===1?n=ht+Y:r===-1&&(n=-ht-Y);for(var c=0,l=t.length;c<l;++c)if(h=(d=t[c]).length)for(var d,h,f=d[h-1],p=as(f),_=f[1]/2+ns,y=Z(_),E=j(_),C=0;C<h;++C,p=A,y=M,E=L,f=N){var N=d[C],A=as(N),k=N[1]/2+ns,M=Z(k),L=j(k),R=A-p,F=R>=0?1:-1,I=F*R,x=I>H,B=y*M;if(u.add(ce(B*F*Z(I),E*L+B*j(I))),s+=x?R+F*ft:R,x^p>=i^A>=i){var w=ai(te(f),te(N));Ui(w);var S=ai(o,w);Ui(S);var v=(x^R>=0?-1:1)*ue(S[2]);(n>v||n===v&&(w[0]||w[1]))&&(a+=x^R>=0?1:-1)}}return(s<-Y||s<Y&&u<-Tc)^a&1}function gr(t,e,i,n){return function(r){var o=e(r),s=fr(),a=e(s),u=!1,c,l,d,h={point:f,lineStart:_,lineEnd:y,polygonStart:function(){h.point=E,h.lineStart=C,h.lineEnd=N,l=[],c=[]},polygonEnd:function(){h.point=f,h.lineStart=_,h.lineEnd=y,l=ii(l);var A=Zc(c,n);l.length?(u||(r.polygonStart(),u=!0),mr(l,Pf,A,i,r)):A&&(u||(r.polygonStart(),u=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),l=c=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(A,k){t(A,k)&&r.point(A,k)}function p(A,k){o.point(A,k)}function _(){h.point=p,o.lineStart()}function y(){h.point=f,o.lineEnd()}function E(A,k){d.push([A,k]),a.point(A,k)}function C(){a.lineStart(),d=[]}function N(){E(d[0][0],d[0][1]),a.lineEnd();var A=a.clean(),k=s.result(),M,L=k.length,R,F,I;if(d.pop(),c.push(d),d=null,!!L){if(A&1){if(F=k[0],(R=F.length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),M=0;M<R;++M)r.point((I=F[M])[0],I[1]);r.lineEnd()}return}L>1&&A&2&&k.push(k.pop().concat(k.shift())),l.push(k.filter(Cf))}}return h}}function Cf(t){return t.length>1}function Pf(t,e){return((t=t.x)[0]<0?t[1]-ht-Y:ht-t[1])-((e=e.x)[0]<0?e[1]-ht-Y:ht-e[1])}var ls=gr(function(){return!0},Nf,Sf,[-H,-ht]);function Nf(t){var e=NaN,i=NaN,n=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,s){var a=o>0?H:-H,u=$(o-e);$(u-H)<Y?(t.point(e,i=(i+s)/2>0?ht:-ht),t.point(n,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),r=0):n!==a&&u>=H&&($(e-n)<Y&&(e-=n*Y),$(o-a)<Y&&(o-=a*Y),i=kf(e,i,o,s),t.point(n,i),t.lineEnd(),t.lineStart(),t.point(a,i),r=0),t.point(e=o,i=s),n=a},lineEnd:function(){t.lineEnd(),e=i=NaN},clean:function(){return 2-r}}}function kf(t,e,i,n){var r,o,s=Z(t-i);return $(s)>Y?ur((Z(e)*(o=j(n))*Z(i)-Z(n)*(r=j(e))*Z(t))/(r*o*s)):(e+n)/2}function Sf(t,e,i,n){var r;if(t==null)r=i*ht,n.point(-H,r),n.point(0,r),n.point(H,r),n.point(H,0),n.point(H,-r),n.point(0,-r),n.point(-H,-r),n.point(-H,0),n.point(-H,r);else if($(t[0]-e[0])>Y){var o=t[0]<e[0]?H:-H;r=i*o/2,n.point(-o,r),n.point(0,r),n.point(o,r)}else n.point(e[0],e[1])}function Jc(t){var e=j(t),i=2*tt,n=e>0,r=$(e)>Y;function o(l,d,h,f){qc(f,t,i,h,l,d)}function s(l,d){return j(l)*j(d)>e}function a(l){var d,h,f,p,_;return{lineStart:function(){p=f=!1,_=1},point:function(y,E){var C=[y,E],N,A=s(y,E),k=n?A?0:c(y,E):A?c(y+(y<0?H:-H),E):0;if(!d&&(p=f=A)&&l.lineStart(),A!==f&&(N=u(d,C),(!N||li(d,N)||li(C,N))&&(C[2]=1)),A!==f)_=0,A?(l.lineStart(),N=u(C,d),l.point(N[0],N[1])):(N=u(d,C),l.point(N[0],N[1],2),l.lineEnd()),d=N;else if(r&&d&&n^A){var M;!(k&h)&&(M=u(C,d,!0))&&(_=0,n?(l.lineStart(),l.point(M[0][0],M[0][1]),l.point(M[1][0],M[1][1]),l.lineEnd()):(l.point(M[1][0],M[1][1]),l.lineEnd(),l.lineStart(),l.point(M[0][0],M[0][1],3)))}A&&(!d||!li(d,C))&&l.point(C[0],C[1]),d=C,f=A,h=k},lineEnd:function(){f&&l.lineEnd(),d=null},clean:function(){return _|(p&&f)<<1}}}function u(l,d,h){var f=te(l),p=te(d),_=[1,0,0],y=ai(f,p),E=Yi(y,y),C=y[0],N=E-C*C;if(!N)return!h&&l;var A=e*E/N,k=-e*C/N,M=ai(_,y),L=$i(_,A),R=$i(y,k);hr(L,R);var F=M,I=Yi(L,F),x=Yi(F,F),B=I*I-x*(Yi(L,L)-1);if(!(B<0)){var w=Gt(B),S=$i(F,(-I-w)/x);if(hr(S,L),S=Di(S),!h)return S;var v=l[0],T=d[0],U=l[1],J=d[1],X;T<v&&(X=v,v=T,T=X);var Kt=T-v,Lt=$(Kt-H)<Y,Ht=Lt||Kt<Y;if(!Lt&&J<U&&(X=U,U=J,J=X),Ht?Lt?U+J>0^S[1]<($(S[0]-v)<Y?U:J):U<=S[1]&&S[1]<=J:Kt>H^(v<=S[0]&&S[0]<=T)){var Vt=$i(F,(-I+w)/x);return hr(Vt,L),[S,Di(Vt)]}}}function c(l,d){var h=n?t:H-t,f=0;return l<-h?f|=1:l>h&&(f|=2),d<-h?f|=4:d>h&&(f|=8),f}return gr(s,a,o,n?[0,-t]:[-H,t-H])}function Qc(t,e,i,n,r,o){var s=t[0],a=t[1],u=e[0],c=e[1],l=0,d=1,h=u-s,f=c-a,p;if(p=i-s,!(!h&&p>0)){if(p/=h,h<0){if(p<l)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>l&&(l=p)}if(p=r-s,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>l&&(l=p)}else if(h>0){if(p<l)return;p<d&&(d=p)}if(p=n-a,!(!f&&p>0)){if(p/=f,f<0){if(p<l)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>l&&(l=p)}if(p=o-a,!(!f&&p<0)){if(p/=f,f<0){if(p>d)return;p>l&&(l=p)}else if(f>0){if(p<l)return;p<d&&(d=p)}return l>0&&(t[0]=s+l*h,t[1]=a+l*f),d<1&&(e[0]=s+d*h,e[1]=a+d*f),!0}}}}}var Wi=1e9,_r=-Wi;function cs(t,e,i,n){function r(c,l){return t<=c&&c<=i&&e<=l&&l<=n}function o(c,l,d,h){var f=0,p=0;if(c==null||(f=s(c,d))!==(p=s(l,d))||u(c,l)<0^d>0)do h.point(f===0||f===3?t:i,f>1?n:e);while((f=(f+d+4)%4)!==p);else h.point(l[0],l[1])}function s(c,l){return $(c[0]-t)<Y?l>0?0:3:$(c[0]-i)<Y?l>0?2:1:$(c[1]-e)<Y?l>0?1:0:l>0?3:2}function a(c,l){return u(c.x,l.x)}function u(c,l){var d=s(c,1),h=s(l,1);return d!==h?d-h:d===0?l[1]-c[1]:d===1?c[0]-l[0]:d===2?c[1]-l[1]:l[0]-c[0]}return function(c){var l=c,d=fr(),h,f,p,_,y,E,C,N,A,k,M,L={point:R,lineStart:B,lineEnd:w,polygonStart:I,polygonEnd:x};function R(v,T){r(v,T)&&l.point(v,T)}function F(){for(var v=0,T=0,U=f.length;T<U;++T)for(var J=f[T],X=1,Kt=J.length,Lt=J[0],Ht,Vt,de=Lt[0],yt=Lt[1];X<Kt;++X)Ht=de,Vt=yt,Lt=J[X],de=Lt[0],yt=Lt[1],Vt<=n?yt>n&&(de-Ht)*(n-Vt)>(yt-Vt)*(t-Ht)&&++v:yt<=n&&(de-Ht)*(n-Vt)<(yt-Vt)*(t-Ht)&&--v;return v}function I(){l=d,h=[],f=[],M=!0}function x(){var v=F(),T=M&&v,U=(h=ii(h)).length;(T||U)&&(c.polygonStart(),T&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),U&&mr(h,a,v,o,c),c.polygonEnd()),l=c,h=f=p=null}function B(){L.point=S,f&&f.push(p=[]),k=!0,A=!1,C=N=NaN}function w(){h&&(S(_,y),E&&A&&d.rejoin(),h.push(d.result())),L.point=R,A&&l.lineEnd()}function S(v,T){var U=r(v,T);if(f&&p.push([v,T]),k)_=v,y=T,E=U,k=!1,U&&(l.lineStart(),l.point(v,T));else if(U&&A)l.point(v,T);else{var J=[C=Math.max(_r,Math.min(Wi,C)),N=Math.max(_r,Math.min(Wi,N))],X=[v=Math.max(_r,Math.min(Wi,v)),T=Math.max(_r,Math.min(Wi,T))];Qc(J,X,t,e,i,n)?(A||(l.lineStart(),l.point(J[0],J[1])),l.point(X[0],X[1]),U||l.lineEnd(),M=!1):U&&(l.lineStart(),l.point(v,T),M=!1)}C=v,N=T,A=U}return L}}var Xi=t=>t;var us=new Bt,ds=new Bt,tu,eu,hs,fs,ye={point:pt,lineStart:pt,lineEnd:pt,polygonStart:function(){ye.lineStart=Of,ye.lineEnd=Lf},polygonEnd:function(){ye.lineStart=ye.lineEnd=ye.point=pt,us.add($(ds)),ds=new Bt},result:function(){var t=us/2;return us=new Bt,t}};function Of(){ye.point=Mf}function Mf(t,e){ye.point=iu,tu=hs=t,eu=fs=e}function iu(t,e){ds.add(fs*t-hs*e),hs=t,fs=e}function Lf(){iu(tu,eu)}var ps=ye;var ci=1/0,vr=ci,qi=-ci,yr=qi,Rf={point:Ff,lineStart:pt,lineEnd:pt,polygonStart:pt,polygonEnd:pt,result:function(){var t=[[ci,vr],[qi,yr]];return qi=yr=-(vr=ci=1/0),t}};function Ff(t,e){t<ci&&(ci=t),t>qi&&(qi=t),e<vr&&(vr=e),e>yr&&(yr=e)}var ui=Rf;var ms=0,gs=0,Ki=0,xr=0,br=0,di=0,_s=0,vs=0,Zi=0,ou,su,ee,ie,Xt={point:He,lineStart:nu,lineEnd:ru,polygonStart:function(){Xt.lineStart=If,Xt.lineEnd=Bf},polygonEnd:function(){Xt.point=He,Xt.lineStart=nu,Xt.lineEnd=ru},result:function(){var t=Zi?[_s/Zi,vs/Zi]:di?[xr/di,br/di]:Ki?[ms/Ki,gs/Ki]:[NaN,NaN];return ms=gs=Ki=xr=br=di=_s=vs=Zi=0,t}};function He(t,e){ms+=t,gs+=e,++Ki}function nu(){Xt.point=Tf}function Tf(t,e){Xt.point=Vf,He(ee=t,ie=e)}function Vf(t,e){var i=t-ee,n=e-ie,r=Gt(i*i+n*n);xr+=r*(ee+t)/2,br+=r*(ie+e)/2,di+=r,He(ee=t,ie=e)}function ru(){Xt.point=He}function If(){Xt.point=Gf}function Bf(){au(ou,su)}function Gf(t,e){Xt.point=au,He(ou=ee=t,su=ie=e)}function au(t,e){var i=t-ee,n=e-ie,r=Gt(i*i+n*n);xr+=r*(ee+t)/2,br+=r*(ie+e)/2,di+=r,r=ie*t-ee*e,_s+=r*(ee+t),vs+=r*(ie+e),Zi+=r*3,He(ee=t,ie=e)}var ys=Xt;function wr(t){this._context=t}wr.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,ft);break}}},result:pt};var bs=new Bt,xs,lu,cu,Ji,Qi,Er={point:pt,lineStart:function(){Er.point=Hf},lineEnd:function(){xs&&uu(lu,cu),Er.point=pt},polygonStart:function(){xs=!0},polygonEnd:function(){xs=null},result:function(){var t=+bs;return bs=new Bt,t}};function Hf(t,e){Er.point=uu,lu=Ji=t,cu=Qi=e}function uu(t,e){Ji-=t,Qi-=e,bs.add(Gt(Ji*Ji+Qi*Qi)),Ji=t,Qi=e}var ws=Er;var du,Ar,hu,fu,tn=class{constructor(e){this._append=e==null?pu:zf(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,i){switch(this._point){case 0:{this._append`M${e},${i}`,this._point=1;break}case 1:{this._append`L${e},${i}`;break}default:{if(this._append`M${e},${i}`,this._radius!==hu||this._append!==Ar){let n=this._radius,r=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,hu=n,Ar=this._append,fu=this._,this._=r}this._+=fu;break}}}result(){let e=this._;return this._="",e.length?e:null}};function pu(t){let e=1;this._+=t[0];for(let i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function zf(t){let e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return pu;if(e!==du){let i=10**e;du=e,Ar=function(r){let o=1;this._+=r[0];for(let s=r.length;o<s;++o)this._+=Math.round(arguments[o]*i)/i+r[o]}}return Ar}function Cr(t,e){let i=3,n=4.5,r,o;function s(a){return a&&(typeof n=="function"&&o.pointRadius(+n.apply(this,arguments)),ve(a,r(o))),o.result()}return s.area=function(a){return ve(a,r(ps)),ps.result()},s.measure=function(a){return ve(a,r(ws)),ws.result()},s.bounds=function(a){return ve(a,r(ui)),ui.result()},s.centroid=function(a){return ve(a,r(ys)),ys.result()},s.projection=function(a){return arguments.length?(r=a==null?(t=null,Xi):(t=a).stream,s):t},s.context=function(a){return arguments.length?(o=a==null?(e=null,new tn(i)):new wr(e=a),typeof n!="function"&&o.pointRadius(n),s):e},s.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(o.pointRadius(+a),+a),s):n},s.digits=function(a){if(!arguments.length)return i;if(a==null)i=null;else{let u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);i=u}return e===null&&(o=new tn(i)),s},s.projection(t).digits(i).context(e)}function en(t){return function(e){var i=new Es;for(var n in t)i[n]=t[n];return i.stream=e,i}}function Es(){}Es.prototype={constructor:Es,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function As(t,e,i){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),ve(i,t.stream(ui)),e(ui.result()),n!=null&&t.clipExtent(n),t}function Cs(t,e,i){return As(t,function(n){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=Math.min(r/(n[1][0]-n[0][0]),o/(n[1][1]-n[0][1])),a=+e[0][0]+(r-s*(n[1][0]+n[0][0]))/2,u=+e[0][1]+(o-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([a,u])},i)}function mu(t,e,i){return Cs(t,[[0,0],e],i)}function gu(t,e,i){return As(t,function(n){var r=+e,o=r/(n[1][0]-n[0][0]),s=(r-o*(n[1][0]+n[0][0]))/2,a=-o*n[0][1];t.scale(150*o).translate([s,a])},i)}function _u(t,e,i){return As(t,function(n){var r=+e,o=r/(n[1][1]-n[0][1]),s=-o*n[0][0],a=(r-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([s,a])},i)}var vu=16,Df=j(30*tt);function Ps(t,e){return+e?$f(t,e):Yf(t)}function Yf(t){return en({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}function $f(t,e){function i(n,r,o,s,a,u,c,l,d,h,f,p,_,y){var E=c-n,C=l-r,N=E*E+C*C;if(N>4*e&&_--){var A=s+h,k=a+f,M=u+p,L=Gt(A*A+k*k+M*M),R=ue(M/=L),F=$($(M)-1)<Y||$(o-d)<Y?(o+d)/2:ce(k,A),I=t(F,R),x=I[0],B=I[1],w=x-n,S=B-r,v=C*w-E*S;(v*v/N>e||$((E*w+C*S)/N-.5)>.3||s*h+a*f+u*p<Df)&&(i(n,r,o,s,a,u,x,B,F,A/=L,k/=L,M,_,y),y.point(x,B),i(x,B,F,A,k,M,c,l,d,h,f,p,_,y))}}return function(n){var r,o,s,a,u,c,l,d,h,f,p,_,y={point:E,lineStart:C,lineEnd:A,polygonStart:function(){n.polygonStart(),y.lineStart=k},polygonEnd:function(){n.polygonEnd(),y.lineStart=C}};function E(R,F){R=t(R,F),n.point(R[0],R[1])}function C(){d=NaN,y.point=N,n.lineStart()}function N(R,F){var I=te([R,F]),x=t(R,F);i(d,h,l,f,p,_,d=x[0],h=x[1],l=R,f=I[0],p=I[1],_=I[2],vu,n),n.point(d,h)}function A(){y.point=E,n.lineEnd()}function k(){C(),y.point=M,y.lineEnd=L}function M(R,F){N(r=R,F),o=d,s=h,a=f,u=p,c=_,y.point=N}function L(){i(d,h,l,f,p,_,o,s,r,a,u,c,vu,n),y.lineEnd=A,A()}return y}}var Uf=en({point:function(t,e){this.stream.point(t*tt,e*tt)}});function jf(t){return en({point:function(e,i){var n=t(e,i);return this.stream.point(n[0],n[1])}})}function Wf(t,e,i,n,r){function o(s,a){return s*=n,a*=r,[e+t*s,i-t*a]}return o.invert=function(s,a){return[(s-e)/t*n,(i-a)/t*r]},o}function yu(t,e,i,n,r,o){if(!o)return Wf(t,e,i,n,r);var s=j(o),a=Z(o),u=s*t,c=a*t,l=s/t,d=a/t,h=(a*i-s*e)/t,f=(a*e+s*i)/t;function p(_,y){return _*=n,y*=r,[u*_-c*y+e,i-c*_-u*y]}return p.invert=function(_,y){return[n*(l*_-d*y+h),r*(f-d*_-l*y)]},p}function Ns(t){return Xf(function(){return t})()}function Xf(t){var e,i=150,n=480,r=250,o=0,s=0,a=0,u=0,c=0,l,d=0,h=1,f=1,p=null,_=ls,y=null,E,C,N,A=Xi,k=.5,M,L,R,F,I;function x(v){return R(v[0]*tt,v[1]*tt)}function B(v){return v=R.invert(v[0],v[1]),v&&[v[0]*Ct,v[1]*Ct]}x.stream=function(v){return F&&I===v?F:F=Uf(jf(l)(_(M(A(I=v)))))},x.preclip=function(v){return arguments.length?(_=v,p=void 0,S()):_},x.postclip=function(v){return arguments.length?(A=v,y=E=C=N=null,S()):A},x.clipAngle=function(v){return arguments.length?(_=+v?Jc(p=v*tt):(p=null,ls),S()):p*Ct},x.clipExtent=function(v){return arguments.length?(A=v==null?(y=E=C=N=null,Xi):cs(y=+v[0][0],E=+v[0][1],C=+v[1][0],N=+v[1][1]),S()):y==null?null:[[y,E],[C,N]]},x.scale=function(v){return arguments.length?(i=+v,w()):i},x.translate=function(v){return arguments.length?(n=+v[0],r=+v[1],w()):[n,r]},x.center=function(v){return arguments.length?(o=v[0]%360*tt,s=v[1]%360*tt,w()):[o*Ct,s*Ct]},x.rotate=function(v){return arguments.length?(a=v[0]%360*tt,u=v[1]%360*tt,c=v.length>2?v[2]%360*tt:0,w()):[a*Ct,u*Ct,c*Ct]},x.angle=function(v){return arguments.length?(d=v%360*tt,w()):d*Ct},x.reflectX=function(v){return arguments.length?(h=v?-1:1,w()):h<0},x.reflectY=function(v){return arguments.length?(f=v?-1:1,w()):f<0},x.precision=function(v){return arguments.length?(M=Ps(L,k=v*v),S()):Gt(k)},x.fitExtent=function(v,T){return Cs(x,v,T)},x.fitSize=function(v,T){return mu(x,v,T)},x.fitWidth=function(v,T){return gu(x,v,T)},x.fitHeight=function(v,T){return _u(x,v,T)};function w(){var v=yu(i,0,0,h,f,d).apply(null,e(o,s)),T=yu(i,n-v[0],r-v[1],h,f,d);return l=ss(a,u,c),L=ji(e,T),R=ji(l,L),M=Ps(L,k),S()}function S(){return F=I=null,x}return function(){return e=t.apply(this,arguments),x.invert=e.invert&&B,w()}}function Pr(t,e){return[t,Ic(Gc((ht+e)/2))]}Pr.invert=function(t,e){return[t,2*ur(Vc(e))-ht]};function Nr(){return qf(Pr).scale(961/ft)}function qf(t){var e=Ns(t),i=e.center,n=e.scale,r=e.translate,o=e.clipExtent,s=null,a,u,c;e.scale=function(d){return arguments.length?(n(d),l()):n()},e.translate=function(d){return arguments.length?(r(d),l()):r()},e.center=function(d){return arguments.length?(i(d),l()):i()},e.clipExtent=function(d){return arguments.length?(d==null?s=a=u=c=null:(s=+d[0][0],a=+d[0][1],u=+d[1][0],c=+d[1][1]),l()):s==null?null:[[s,a],[u,c]]};function l(){var d=H*n(),h=e(Wc(e.rotate()).invert([0,0]));return o(s==null?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:t===Pr?[[Math.max(h[0]-d,s),a],[Math.min(h[0]+d,u),c]]:[[s,Math.max(h[1]-d,a)],[u,Math.min(h[1]+d,c)]])}return l()}function hi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var xu=Symbol("implicit");function kr(){var t=new pe,e=[],i=[],n=xu;function r(o){let s=t.get(o);if(s===void 0){if(n!==xu)return n;t.set(o,s=e.push(o)-1)}return i[s%i.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new pe;for(let s of o)t.has(s)||t.set(s,e.push(s)-1);return r},r.range=function(o){return arguments.length?(i=Array.from(o),r):i.slice()},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return kr(e,i).unknown(n)},hi.apply(r,arguments),r}function Sr(){var t=kr().unknown(void 0),e=t.domain,i=t.range,n=0,r=1,o,s,a=!1,u=0,c=0,l=.5;delete t.unknown;function d(){var h=e().length,f=r<n,p=f?r:n,_=f?n:r;o=(_-p)/Math.max(1,h-u+c*2),a&&(o=Math.floor(o)),p+=(_-p-o*(h-u))*l,s=o*(1-u),a&&(p=Math.round(p),s=Math.round(s));var y=Rn(h).map(function(E){return p+o*E});return i(f?y.reverse():y)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([n,r]=h,n=+n,r=+r,d()):[n,r]},t.rangeRound=function(h){return[n,r]=h,n=+n,r=+r,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(u=Math.min(1,c=+h),d()):u},t.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),d()):u},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),d()):l},t.copy=function(){return Sr(e(),[n,r]).round(a).paddingInner(u).paddingOuter(c).align(l)},hi.apply(d(),arguments)}function bu(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return bu(e())},t}function ks(){return bu(Sr.apply(null,arguments).paddingInner(1))}function Ss(t){return function(){return t}}function Os(t){return+t}var wu=[0,1];function fi(t){return t}function Ms(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Ss(isNaN(e)?NaN:.5)}function Kf(t,e){var i;return t>e&&(i=t,t=e,e=i),function(n){return Math.max(t,Math.min(e,n))}}function Zf(t,e,i){var n=t[0],r=t[1],o=e[0],s=e[1];return r<n?(n=Ms(r,n),o=i(s,o)):(n=Ms(n,r),o=i(o,s)),function(a){return o(n(a))}}function Jf(t,e,i){var n=Math.min(t.length,e.length)-1,r=new Array(n),o=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)r[s]=Ms(t[s],t[s+1]),o[s]=i(e[s],e[s+1]);return function(a){var u=No(t,a,1,n)-1;return o[u](r[u](a))}}function Eu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qf(){var t=wu,e=wu,i=ae,n,r,o,s=fi,a,u,c;function l(){var h=Math.min(t.length,e.length);return s!==fi&&(s=Kf(t[0],t[h-1])),a=h>2?Jf:Zf,u=c=null,d}function d(h){return h==null||isNaN(h=+h)?o:(u||(u=a(t.map(n),e,i)))(n(s(h)))}return d.invert=function(h){return s(r((c||(c=a(e,t.map(n),gt)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,Os),l()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),l()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),i=zo,l()},d.clamp=function(h){return arguments.length?(s=h?!0:fi,l()):s!==fi},d.interpolate=function(h){return arguments.length?(i=h,l()):i},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,f){return n=h,r=f,l()}}function Ls(){return Qf()(fi,fi)}function Rs(t,e,i,n){var r=ko(t,e,i),o;switch(n=_e(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=es(r,s))&&(n.precision=o),cr(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=is(r,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=ts(r))&&(n.precision=o-(n.type==="%")*2);break}}return lr(n)}function tp(t){var e=t.domain;return t.ticks=function(i){var n=e();return ei(n[0],n[n.length-1],i??10)},t.tickFormat=function(i,n){var r=e();return Rs(r[0],r[r.length-1],i??10,n)},t.nice=function(i){i==null&&(i=10);var n=e(),r=0,o=n.length-1,s=n[r],a=n[o],u,c,l=10;for(a<s&&(c=s,s=a,a=c,c=r,r=o,o=c);l-- >0;){if(c=Ei(s,a,i),c===u)return n[r]=s,n[o]=a,e(n);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;u=c}return t},t}function xe(){var t=Ls();return t.copy=function(){return Eu(t,xe())},hi.apply(t,arguments),tp(t)}function Pt(t){return function(){return t}}var Fs=Math.abs,vt=Math.atan2,be=Math.cos,Au=Math.max,Or=Math.min,qt=Math.sin,ze=Math.sqrt,Mt=1e-12,pi=Math.PI,nn=pi/2,Cu=2*pi;function Pu(t){return t>1?0:t<-1?pi:Math.acos(t)}function Ts(t){return t>=1?nn:t<=-1?-nn:Math.asin(t)}function Mr(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(i==null)e=null;else{let n=Math.floor(i);if(!(n>=0))throw new RangeError(`invalid digits: ${i}`);e=n}return t},()=>new Be(e)}function ep(t){return t.innerRadius}function ip(t){return t.outerRadius}function np(t){return t.startAngle}function rp(t){return t.endAngle}function op(t){return t&&t.padAngle}function sp(t,e,i,n,r,o,s,a){var u=i-t,c=n-e,l=s-r,d=a-o,h=d*u-l*c;if(!(h*h<Mt))return h=(l*(e-o)-d*(t-r))/h,[t+h*u,e+h*c]}function Lr(t,e,i,n,r,o,s){var a=t-i,u=e-n,c=(s?o:-o)/ze(a*a+u*u),l=c*u,d=-c*a,h=t+l,f=e+d,p=i+l,_=n+d,y=(h+p)/2,E=(f+_)/2,C=p-h,N=_-f,A=C*C+N*N,k=r-o,M=h*_-p*f,L=(N<0?-1:1)*ze(Au(0,k*k*A-M*M)),R=(M*N-C*L)/A,F=(-M*C-N*L)/A,I=(M*N+C*L)/A,x=(-M*C+N*L)/A,B=R-y,w=F-E,S=I-y,v=x-E;return B*B+w*w>S*S+v*v&&(R=I,F=x),{cx:R,cy:F,x01:-l,y01:-d,x11:R*(r/k-1),y11:F*(r/k-1)}}function Vs(){var t=ep,e=ip,i=Pt(0),n=null,r=np,o=rp,s=op,a=null,u=Mr(c);function c(){var l,d,h=+t.apply(this,arguments),f=+e.apply(this,arguments),p=r.apply(this,arguments)-nn,_=o.apply(this,arguments)-nn,y=Fs(_-p),E=_>p;if(a||(a=l=u()),f<h&&(d=f,f=h,h=d),!(f>Mt))a.moveTo(0,0);else if(y>Cu-Mt)a.moveTo(f*be(p),f*qt(p)),a.arc(0,0,f,p,_,!E),h>Mt&&(a.moveTo(h*be(_),h*qt(_)),a.arc(0,0,h,_,p,E));else{var C=p,N=_,A=p,k=_,M=y,L=y,R=s.apply(this,arguments)/2,F=R>Mt&&(n?+n.apply(this,arguments):ze(h*h+f*f)),I=Or(Fs(f-h)/2,+i.apply(this,arguments)),x=I,B=I,w,S;if(F>Mt){var v=Ts(F/h*qt(R)),T=Ts(F/f*qt(R));(M-=v*2)>Mt?(v*=E?1:-1,A+=v,k-=v):(M=0,A=k=(p+_)/2),(L-=T*2)>Mt?(T*=E?1:-1,C+=T,N-=T):(L=0,C=N=(p+_)/2)}var U=f*be(C),J=f*qt(C),X=h*be(k),Kt=h*qt(k);if(I>Mt){var Lt=f*be(N),Ht=f*qt(N),Vt=h*be(A),de=h*qt(A),yt;if(y<pi)if(yt=sp(U,J,Vt,de,Lt,Ht,X,Kt)){var Ur=U-yt[0],jr=J-yt[1],Wr=Lt-yt[0],Xr=Ht-yt[1],Ds=1/qt(Pu((Ur*Wr+jr*Xr)/(ze(Ur*Ur+jr*jr)*ze(Wr*Wr+Xr*Xr)))/2),Ys=ze(yt[0]*yt[0]+yt[1]*yt[1]);x=Or(I,(h-Ys)/(Ds-1)),B=Or(I,(f-Ys)/(Ds+1))}else x=B=0}L>Mt?B>Mt?(w=Lr(Vt,de,U,J,f,B,E),S=Lr(Lt,Ht,X,Kt,f,B,E),a.moveTo(w.cx+w.x01,w.cy+w.y01),B<I?a.arc(w.cx,w.cy,B,vt(w.y01,w.x01),vt(S.y01,S.x01),!E):(a.arc(w.cx,w.cy,B,vt(w.y01,w.x01),vt(w.y11,w.x11),!E),a.arc(0,0,f,vt(w.cy+w.y11,w.cx+w.x11),vt(S.cy+S.y11,S.cx+S.x11),!E),a.arc(S.cx,S.cy,B,vt(S.y11,S.x11),vt(S.y01,S.x01),!E))):(a.moveTo(U,J),a.arc(0,0,f,C,N,!E)):a.moveTo(U,J),!(h>Mt)||!(M>Mt)?a.lineTo(X,Kt):x>Mt?(w=Lr(X,Kt,Lt,Ht,h,-x,E),S=Lr(U,J,Vt,de,h,-x,E),a.lineTo(w.cx+w.x01,w.cy+w.y01),x<I?a.arc(w.cx,w.cy,x,vt(w.y01,w.x01),vt(S.y01,S.x01),!E):(a.arc(w.cx,w.cy,x,vt(w.y01,w.x01),vt(w.y11,w.x11),!E),a.arc(0,0,h,vt(w.cy+w.y11,w.cx+w.x11),vt(S.cy+S.y11,S.cx+S.x11),E),a.arc(S.cx,S.cy,x,vt(S.y11,S.x11),vt(S.y01,S.x01),!E))):a.arc(0,0,h,k,A,E)}if(a.closePath(),l)return a=null,l+""||null}return c.centroid=function(){var l=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-pi/2;return[be(d)*l,qt(d)*l]},c.innerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:Pt(+l),c):t},c.outerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:Pt(+l),c):e},c.cornerRadius=function(l){return arguments.length?(i=typeof l=="function"?l:Pt(+l),c):i},c.padRadius=function(l){return arguments.length?(n=l==null?null:typeof l=="function"?l:Pt(+l),c):n},c.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:Pt(+l),c):r},c.endAngle=function(l){return arguments.length?(o=typeof l=="function"?l:Pt(+l),c):o},c.padAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Pt(+l),c):s},c.context=function(l){return arguments.length?(a=l??null,c):a},c}var nC=Array.prototype.slice;function Nu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ku(t){this._context=t}ku.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Su(t){return new ku(t)}function Ou(t){return t[0]}function Mu(t){return t[1]}function Is(t,e){var i=Pt(!0),n=null,r=Su,o=null,s=Mr(a);t=typeof t=="function"?t:t===void 0?Ou:Pt(t),e=typeof e=="function"?e:e===void 0?Mu:Pt(e);function a(u){var c,l=(u=Nu(u)).length,d,h=!1,f;for(n==null&&(o=r(f=s())),c=0;c<=l;++c)!(c<l&&i(d=u[c],c,u))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(d,c,u),+e(d,c,u));if(f)return o=null,f+""||null}return a.x=function(u){return arguments.length?(t=typeof u=="function"?u:Pt(+u),a):t},a.y=function(u){return arguments.length?(e=typeof u=="function"?u:Pt(+u),a):e},a.defined=function(u){return arguments.length?(i=typeof u=="function"?u:Pt(!!u),a):i},a.curve=function(u){return arguments.length?(r=u,n!=null&&(o=r(n)),a):r},a.context=function(u){return arguments.length?(u==null?n=o=null:o=r(n=u),a):n},a}function we(t,e,i){this.k=t,this.x=e,this.y=i}we.prototype={constructor:we,scale:function(t){return t===1?this:new we(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new we(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bs=new we(1,0,0);Gs.prototype=we.prototype;function Gs(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Bs;return t.__zoom}var mi=class t{countyFeatures=[];townshipFeatures=[];mapColorConfig={};regionCode;regionCodeChange=new dt;districtCode;districtCodeChange=new dt;_elementRef=P(wt);_commonService=P(Ft);_width=800;_height=600;_svg;_container;_projection;_path;_currentZoom=1;_countiesCode=["09007","09020","10016"];_outerIslandCountySettings=[];_destroy=new Q;ngOnChanges(e){return Ee(this,null,function*(){let{regionCode:i,mapColorConfig:n}=e;if(i&&(yield this._handleRegionCodeChange(i.currentValue)),n&&n.currentValue){let r="#ddd";this._container.selectAll(".d3-county-path").attr("fill",o=>this.mapColorConfig[this._getRegionCode(o)]||r),this._container.select(`.${"d3-region-"+this.regionCode}`).selectAll(".d3-township-path").attr("fill",o=>this.mapColorConfig[this._getTownshipCode(o)]||r)}})}ngAfterViewInit(){this._commonService.createResizeObservable(this._elementRef.nativeElement).pipe(kt(this._destroy),fe(50),he(0)).subscribe(()=>this._rerenderMap()),this._initializeMap(),this._renderCountyLayer(this.countyFeatures)}ngOnDestroy(){this._destroy.next(null),this._destroy.complete()}_handleRegionCodeChange(e){return Ee(this,null,function*(){if(!(!this._svg||!this._projection||!this._path)){if(this._container.selectAll(".d3-county-name").style("opacity","0"),this._renderTownshipLayer(""),e==="")this._toggleOuterIslandRectFocusRender(!1),yield this.zoomToAllCounty().end(),this._container.selectAll(".d3-county-name").style("opacity","1").raise();else{let i=!!this._outerIslandCountySettings.find(n=>n.code===e);this._toggleOuterIslandRectFocusRender(i),yield this._zoomToCounty(e)?.end()}this._renderTownshipLayer(e)}})}_updateSvgDimensions(){this._width=this._elementRef.nativeElement.clientWidth,this._height=this._elementRef.nativeElement.clientHeight}_updateMapLayout(){this._updateSvgDimensions(),this._projection.translate([this._width/2,this._height/2]),this._path=Cr().projection(this._projection)}_rerenderMap(){!this._svg||!this._projection||!this._path||(this._updateMapLayout(),this._container.selectAll(".d3-county-path").attr("d",e=>this._getTargetPath(this._getRegionCode(e))(e)),this._container.selectAll(".d3-township-path").attr("d",e=>this._getTargetPath(this._getRegionCode(e))(e)),this._container.selectAll(".d3-info-text").attr("x",e=>`${this._getPathCentroid(e)[0]}`).attr("y",e=>`${this._getPathCentroid(e)[1]}`).attr("transform",e=>this._getTextTransform(e)),this._zoomToCounty(this.regionCode))}_initializeMap(){this._svg=se(this._elementRef.nativeElement).append("svg").style("width","100%").style("height","100%").on("click",e=>{e.target.tagName==="path"||e.target.tagName==="rect"||this.regionCodeChange.emit("")}),this._container=this._svg.append("g"),this._projection=Nr().center([120.95,23.6]).scale(12500),this._updateMapLayout()}_renderHighlight(e,i){this._container.selectAll(".d3-highlight-path").data(e?[e]:[]).join(n=>(n.append("path").attr("d",r=>i(r)).attr("class","d3-highlight-path").style("fill","white").style("opacity","0.2").style("pointer-events","none"),this._svg.selectAll("text").raise(),n),n=>(this._svg.selectAll("text").raise(),n),n=>n.remove())}_renderCountyLayer(e){let i={spacing:8,marginTop:16,marginLeft:16};this._countiesCode.forEach((n,r)=>{let o=e.find(f=>f.properties.COUNTYCODE===n);if(!o)return;let s=72,a=n==="10016"?138:73,u=i.marginLeft,c=this._outerIslandCountySettings.slice(0,r).map(f=>f.boxHeight).reduce((f,p)=>f+p,i.marginTop+i.spacing*r),l=Nr().fitExtent([[u+s*.1,c+s*.1],[u+s*.8,c+a*.8]],o),d=Cr().projection(l),h=`translate(${u+s*.1}, ${c+a*.1})`;this._outerIslandCountySettings.push({code:n,x:u,y:c,boxWidth:s,boxHeight:a,projection:l,path:d,transform:h})}),this._container.selectAll(".d3-region-item").data(e).join("g").attr("class",n=>`d3-region-item ${"d3-region-"+this._getRegionCode(n)}`).call(n=>(this._drawMainIslandCountry(n.filter(r=>!this._countiesCode.includes(this._getRegionCode(r)))),this._drawOuterIslandCountry(n.filter(r=>this._countiesCode.includes(this._getRegionCode(r)))),n)),this._renderPlaceNameLayer(e,"d3-county-name")}_drawMainIslandCountry(e){e.selectAll(".d3-county-path").data(i=>[i]).join("path").attr("class",i=>`d3-county-path ${"d3-path-"+this._getRegionCode(i)}`).attr("d",this._path).on("mouseenter",(i,n)=>this._renderHighlight(n,this._path)).on("mouseleave",i=>this._renderHighlight(null,this._path)).on("click",(i,n)=>this.regionCodeChange.emit(this._getRegionCode(n)))}_drawOuterIslandCountry(e){let i=n=>{let r=this._outerIslandCountySettings.findIndex(o=>o.code===this._getRegionCode(n));return this._outerIslandCountySettings[r]};e.selectAll("rect").data(n=>[n]).join("rect").attr("x",n=>i(n).x).attr("y",n=>i(n).y).attr("rx",8).attr("ry",8).attr("width",n=>i(n).boxWidth).attr("height",n=>i(n).boxHeight).attr("fill","white").on("mouseenter",(n,r)=>this._renderHighlight(r,i(r).path)).on("mouseleave",(n,r)=>this._renderHighlight(null,i(r).path)).on("click",(n,r)=>this.regionCodeChange.emit(this._getRegionCode(r))),e.selectAll(".d3-county-path").data(n=>[n]).join("path").attr("class",n=>`d3-county-path ${"d3-path-"+this._getRegionCode(n)}`).attr("d",n=>i(n).path(n)).attr("pointer-events","none")}_renderTownshipLayer(e){if(this._container.selectAll(".d3-township-name").remove(),this._container.selectAll(".d3-township-path").remove(),e===""||!e)return;let i=this.townshipFeatures.filter(n=>n.properties.COUNTYCODE===e);this._container.select(`.${"d3-region-"+e}`).selectAll(".d3-township-path").data(i).join("path").attr("class",n=>`d3-township-path ${"d3-path-"+this._getTownshipCode(n)}`).attr("d",n=>this._getTargetPath(this._getRegionCode(n))(n)).on("mouseenter",(n,r)=>this._renderHighlight(r,this._getTargetPath(e))).on("mouseleave",n=>this._renderHighlight(null,this._getTargetPath(e))).on("click",(n,r)=>this.districtCodeChange.emit(this._getTownshipCode(r))),this._renderPlaceNameLayer(i,"d3-township-name")}_toggleOuterIslandRectFocusRender(e){this._container.selectAll("rect").style("opacity",e?"0":"1").style("pointer-events",e?"none":"auto")}_getRegionCode(e){return e.properties.COUNTYCODE}_getTownshipCode(e){return e.properties.TOWNCODE}_getTargetPath(e){let i=this._outerIslandCountySettings.find(n=>n.code===e);return i?i.path:this._path}_getPathCentroid(e){let i=this._outerIslandCountySettings.findIndex(r=>r.code===this._getRegionCode(e)),n=e.properties.COUNTYCODE&&!e.properties.TOWNCODE;return i!==-1&&n?[this._outerIslandCountySettings[i].x+this._outerIslandCountySettings[i].boxWidth/2,this._outerIslandCountySettings[i].y+this._outerIslandCountySettings[i].boxHeight-12]:this._getTargetPath(this._getRegionCode(e)).centroid(e).map((r,o)=>r+o*this._getTextFontSize()/2)}_getTextFontSize(){return 16/this._currentZoom}_getTextTransform(e){let i=!e.properties.TOWNCODE,n=(s,a)=>{if(!a)return{x:0,y:0};switch(s){case"10017":return{x:30,y:-15};case"63000":return{x:5,y:10};case"65000":return{x:-5,y:20};case"68000":return{x:-15,y:-25};case"10018":return{x:35,y:-10};case"10004":return{x:5,y:5};case"10005":return{x:-5,y:0};case"66000":return{x:-20,y:5};case"10009":return{x:0,y:-10};case"10020":return{x:0,y:10};case"10010":return{x:40,y:0};case"64000":return{x:10,y:0};case"10013":return{x:-15,y:-30};case"10015":return{x:5,y:0};default:return{x:0,y:0}}},{x:r,y:o}=n(this._getRegionCode(e),i);return`translate(${r}, ${o})`}_getTextContent(e){return e.properties.TOWNCODE?e.properties.TOWNNAME:this._countiesCode.includes(this._getRegionCode(e))?(n=>n==="\u9023\u6C5F"?"\u99AC\u7956":n)(e.properties.COUNTYNAME.replace("\u7E23","")):e.properties.COUNTYNAME}_renderPlaceNameLayer(e,i){let n=this._container;if(i==="d3-township-name"){let r=this._getRegionCode(e[0]);this._outerIslandCountySettings.findIndex(s=>s.code===r)!==-1&&(n=n.select(`.${"d3-region-"+r}`))}n.selectAll(`.${i}`).data(e).join("text").attr("class",`d3-info-text ${i}`).attr("font-size",`${this._getTextFontSize()}px`).attr("x",r=>`${this._getPathCentroid(r)[0]}`).attr("y",r=>`${this._getPathCentroid(r)[1]}`).attr("transform",r=>this._getTextTransform(r)).text(r=>this._getTextContent(r)).raise()}_zoomToCounty(e){let i=this.countyFeatures.find(d=>d.properties.COUNTYCODE===e);if(i===void 0)return;let r=this._getTargetPath(e).bounds(i),o=r[1][0]-r[0][0],s=r[1][1]-r[0][1],a=(r[0][0]+r[1][0])/2,u=(r[0][1]+r[1][1])/2,c=Math.max(1,Math.min(25,.9/Math.max(o/this._width,s/this._height))),l=[this._width/2-c*a,this._height/2-c*u];return this._currentZoom=c,this._container.interrupt().transition().duration(500).attr("transform",`translate(${l[0]},${l[1]}) scale(${c})`)}zoomToAllCounty(){return this._currentZoom=1,this._container.interrupt().transition().duration(500).attr("transform","translate(0, 0) scale(1)")}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-zh-tw-map"]],inputs:{countyFeatures:"countyFeatures",townshipFeatures:"townshipFeatures",mapColorConfig:"mapColorConfig",regionCode:"regionCode",districtCode:"districtCode"},outputs:{regionCodeChange:"regionCodeChange",districtCodeChange:"districtCodeChange"},features:[lt],decls:0,vars:0,template:function(i,n){},encapsulation:2})};var Fr=class t{constructor(e,i){this.dialogRef=e;this.data=i;this.mapColorConfig=ut({},i.mapColorConfig)}_apiService=P(Je);regionCode="";districtCode="";mapColorConfig;_updateMapColorConfig(e){let i=e.ADMIN_COLLECTION.map(n=>{let r=n.CANDIDATES_VOTES.reduce((a,u)=>{let c=a.VOTE_COUNT??-1/0;return(u.VOTE_COUNT??-1/0)>c?u:a},n.CANDIDATES_VOTES[0]),o=e.CANDIDATES.findIndex(a=>a.NO==r.NO),s=Yt[e.CANDIDATES[o].PARTY]?.REPRESENTATIVE_COLOR||"";return{[n.ADMIN_CODE]:s}}).reduce((n,r)=>ut(ut({},n),r),{});this.mapColorConfig=ut(ut({},this.mapColorConfig),i)}changeRegionCode(e){return Ee(this,null,function*(){let i=e===""?this._apiService.fetchCentralVotesJson(this.data.gregorianYear):this._apiService.fetchCountyVotesJson(this.data.gregorianYear,e),n=yield on(i.pipe(vi(()=>Ae(void 0))));this._updateMapColorConfig(n||new $t),this.regionCode=e})}search(){let{regionCode:e,districtCode:i}=this;this.dialogRef.close({regionCode:e,districtCode:i})}cancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(eo(Qe),eo(Ao))};static \u0275cmp=z({type:t,selectors:[["app-mobile-map-selector"]],decls:14,vars:5,consts:[[1,"flex","h-[calc(100dvh_-_48px)]","w-[calc(100dvw_-_24px)]","flex-col","rounded-2xl","bg-white","shadow"],[1,"flex","items-center","justify-between","px-4","py-3"],[1,"text-base","font-bold","text-dark"],["type","button",1,"flex","size-5","items-center","justify-center","rounded-full",3,"click"],["width","18","height","18","viewBox","0 0 18 18","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.1797 12.0078L10.1719 9L13.1797 5.99219L12.0078 4.82031L9 7.82812L5.99219 4.82031L4.82031 5.99219L7.82812 9L4.82031 12.0078L5.99219 13.1797L9 10.1719L12.0078 13.1797L13.1797 12.0078ZM3.10156 3.14062C4.74219 1.5 6.70833 0.679688 9 0.679688C11.2917 0.679688 13.2448 1.5 14.8594 3.14062C16.5 4.75521 17.3203 6.70833 17.3203 9C17.3203 11.2917 16.5 13.2578 14.8594 14.8984C13.2448 16.513 11.2917 17.3203 9 17.3203C6.70833 17.3203 4.74219 16.513 3.10156 14.8984C1.48698 13.2578 0.679688 11.2917 0.679688 9C0.679688 6.70833 1.48698 4.75521 3.10156 3.14062Z","fill","#334155"],[1,"grow","bg-[#E4FAFF]"],[1,"block","size-full",3,"regionCodeChange","mapColorConfig","countyFeatures","townshipFeatures","regionCode","districtCode"],[1,"flex","items-center","justify-between","gap-x-5","px-4","py-3"],["type","button",1,"w-full","rounded-md","bg-gray-200","px-4","py-2","text-sm","text-dark",3,"click"],["type","button",1,"w-full","rounded-md","bg-primary","px-4","py-2","text-sm","text-white",3,"click"]],template:function(i,n){i&1&&(g(0,"div",0)(1,"div",1)(2,"h3",2),O(3,"\u53F0\u7063\u5730\u5716"),m(),g(4,"button",3),K("click",function(){return n.cancel()}),dn(),g(5,"svg",4),G(6,"path",5),m()()(),Xs(),g(7,"div",6)(8,"app-zh-tw-map",7),K("regionCodeChange",function(o){return n.changeRegionCode(o)}),m()(),g(9,"div",8)(10,"button",9),K("click",function(){return n.cancel()}),O(11," \u8FD4\u56DE "),m(),g(12,"button",10),K("click",function(){return n.search()}),O(13," \u641C\u5C0B "),m()()()),i&2&&(b(8),V("mapColorConfig",n.mapColorConfig)("countyFeatures",n.data.regionFeatures)("townshipFeatures",n.data.districtFeatures)("regionCode",n.regionCode)("districtCode",n.districtCode))},dependencies:[mi],encapsulation:2})};var Tr=class t{data=[];marginTop=24;marginRight=0;marginBottom=28;marginLeft=56;groupGap=.2;barGap=.2;tickInnerGap=16;tickCount=4;onPointer=new dt;_elementRef=P(wt);_commonService=P(Ft);width=124;height=124;svg;chartG;yAxisG;yScale;groups=[];subgroups=[];_destroy=new Q;ngAfterViewInit(){this._initializeChart(),this._commonService.createResizeObservable(this._elementRef.nativeElement).pipe(kt(this._destroy),fe(50),he(0)).subscribe(()=>this._updateChartLayout(this.data))}ngOnChanges(e){if(this.svg){if(e.width||e.height||e.marginTop||e.marginRight||e.marginBottom||e.marginLeft||e.groupGap||e.barGap){let i=e.data?e.data.currentValue:this.data;this._updateChartLayout(i)}e.data&&this._updateChartRender(e.data.currentValue)}}ngOnDestroy(){this._destroy.next(null),this._destroy.complete()}_initializeChart(){this.svg=se(this._elementRef.nativeElement).append("svg"),this.yAxisG=this.svg.append("g"),this.chartG=this.svg.append("g"),this._updateChartLayout(this.data)}_updateChartLayout(e){this.width=this._elementRef.nativeElement.clientWidth,this.height=this._elementRef.nativeElement.clientHeight,this.svg.attr("width",this.width).attr("height",this.height).attr("viewBox",[0,0,this.width,this.height]),this._updateChartRender(e)}_updateChartRender(e){this.groups=Array.from(new Set(e.map(r=>r.groupId))),this.subgroups=Array.from(new Set(e.map(r=>r.subgroupId)));let i=this.width-this.marginLeft-this.tickInnerGap-this.marginRight,n=this.groups.length===0?0:i/this.groups.length;this._updateYAxis(i,e),this._updateGroupBars(n,e),this._updateLabels(n)}_calculateTickValues(e,i){let n=ei(0,e,i);n[n.length-1]<e&&(n[n.length]=n[n.length-1]+n[1]);let r=n[n.length-1]/i,o=String(r).length;if(o>=4){let u=Number(String(r).slice(0,1)),c=Number(String(r).slice(1,2));c<5&&c!==0?c=5:c>5&&(u+=1,c=0),r=Number(`${u}${c}`.padEnd(o,"0"))}let s=[0,1e3,2e3,3e3,4e3],a=Array(i+1).fill(r).map((u,c)=>u*c);return a.every(u=>u===0)?s:a}_updateYAxis(e,i){let n=Ln(i,u=>u.value)??0,r=this._calculateTickValues(n,this.tickCount);this.yScale=xe().domain([0,r[r.length-1]]).range([this.height-this.marginBottom,this.marginTop]);let o=1e4,s=r[1]>=o,a=Ci(this.yScale).tickValues(r).tickFormat(u=>{let c=Number(u),l=s?c/o:c,d=s&&l?"\u842C":"";return Math.trunc(l).toLocaleString()+d}).tickPadding(this.marginLeft-this.tickInnerGap).tickSizeInner(0).tickSizeOuter(0);this.yAxisG.attr("transform",`translate(${this.marginLeft+this.tickInnerGap},0)`).call(a).call(u=>u.select(".domain").remove()).call(u=>{u.selectAll(".tick line").attr("x2",e).attr("stroke","#DEE2E6"),u.selectAll(".tick text").attr("class","d3-chart-label")})}_updateGroupBars(e,i){let n=e*(1-this.groupGap)/this.subgroups.length,r=ti(i,c=>c.groupId),o=this.chartG.selectAll("g.d3-chart-data-group").data(Array.from(r.entries()));o.exit().remove();let u=o.enter().append("g").attr("class","d3-chart-data-group").merge(o).attr("transform",(c,l)=>`translate(${this.marginLeft+this.tickInnerGap+l*e},0)`).on("pointerover",(c,l)=>this.onPointer.emit({event:c,data:l[1]})).on("pointerleave",(c,l)=>this.onPointer.emit({event:c,data:l[1]})).selectAll("rect").data(([c,l])=>l);u.exit().remove(),u.enter().append("rect").merge(u).transition().duration(500).attr("x",c=>this.subgroups.indexOf(c.subgroupId)*n+this.groupGap*e/2).attr("y",c=>this.yScale(c.value)).attr("width",n*(1-this.barGap)).attr("height",c=>this.yScale(0)-this.yScale(c.value)).attr("fill",c=>c.color)}_updateLabels(e){let i=this.svg.selectAll("text.d3-chart-x-label").data(this.groups);i.exit().remove(),i.enter().append("text").attr("class","d3-chart-label d3-chart-x-label").merge(i).attr("x",(n,r)=>this.marginLeft+this.tickInnerGap+r*e+e/2).attr("y",this.height).text(n=>n)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-grouped-bar-chart"]],hostAttrs:[1,"block"],inputs:{data:"data",marginTop:"marginTop",marginRight:"marginRight",marginBottom:"marginBottom",marginLeft:"marginLeft",groupGap:"groupGap",barGap:"barGap",tickInnerGap:"tickInnerGap",tickCount:"tickCount"},outputs:{onPointer:"onPointer"},features:[lt],decls:0,vars:0,template:function(i,n){},encapsulation:2})};var ap=()=>[];function lp(t,e){if(t&1&&(G(0,"div",6),g(1,"div",7),O(2),m()),t&2){let i=e.$implicit;Et("background",i.REPRESENTATIVE_COLOR),b(2),rt(i.CN_FULL_NAME)}}function cp(t,e){t&1&&G(0,"div",8)}function up(t,e){t&1&&(g(0,"div",5),st(1,cp,1,0,"div",8,At),m()),t&2&&(b(),at($e(0,ap).constructor(4)))}function dp(t,e){t&1&&(g(0,"div",10),O(1,"\u66AB\u7121\u8CC7\u6599"),m())}function hp(t,e){if(t&1){let i=Rt();g(0,"app-grouped-bar-chart",9),K("onPointer",function(r){xt(i);let o=D();return bt(o.toggleVotesOverlay(r))}),m(),q(1,dp,2,0,"div",10)}if(t&2){let i=D();V("data",i.historicalVoteCounts),b(),W(i.historicalVoteCounts.length===0?1:-1)}}var Vr=class t{isLoaded;activePartyOrder=[];historicalVoteCounts=[];toggleVotesOverlay(e){}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-historical-party-vote-counts"]],inputs:{isLoaded:"isLoaded",activePartyOrder:"activePartyOrder",historicalVoteCounts:"historicalVoteCounts"},decls:10,vars:1,consts:[[1,"rounded-xl","border","border-solid","border-gray-300","bg-white"],[1,"flex","items-center","justify-between","px-4","pb-3","pt-6"],[1,"text-xl","font-bold","text-dark"],[1,"flex","items-center","gap-x-1"],[1,"relative","h-64","px-4","pb-6","pt-3"],[1,"flex","h-full","flex-col","justify-evenly"],[1,"h-2","w-2","rounded-full"],[1,"text-xs","leading-5","text-dark"],[1,"cmp-loading","h-8"],[1,"block","h-full",3,"onPointer","data"],[1,"-translate-1/2","absolute","left-1/2","top-1/2","text-base","text-dark"]],template:function(i,n){i&1&&(g(0,"div",0)(1,"div",1)(2,"h5",2),O(3,"\u6B77\u5C46\u653F\u9EE8\u5F97\u7968\u6578"),m(),g(4,"div",3),st(5,lp,3,3,null,null,At),m()(),g(7,"div",4),q(8,up,3,1,"div",5)(9,hp,2,2),m()()),i&2&&(b(5),at(n.activePartyOrder),b(3),W(n.isLoaded?9:8))},dependencies:[Tr],encapsulation:2})};var Ir=class t{data=[];marginTop=24;marginRight=0;marginBottom=28;marginLeft=56;groupGap=.2;barGap=.2;tickInnerGap=16;tickCount=4;onPointer=new dt;_elementRef=P(wt);_commonService=P(Ft);width=124;height=124;svg;chartG;yAxisG;yScale;groups=[];subgroups=[];_destroy=new Q;ngAfterViewInit(){this._initializeChart(),this._commonService.createResizeObservable(this._elementRef.nativeElement).pipe(kt(this._destroy),fe(50),he(0)).subscribe(()=>this._updateChartLayout(this.data))}ngOnChanges(e){if(this.svg){if(e.width||e.height||e.marginTop||e.marginRight||e.marginBottom||e.marginLeft||e.groupGap||e.barGap){let i=e.data?e.data.currentValue:this.data;this._updateChartLayout(i)}e.data&&this._updateChartRender(e.data.currentValue)}}ngOnDestroy(){this._destroy.next(null),this._destroy.complete()}_initializeChart(){this.svg=se(this._elementRef.nativeElement).append("svg"),this.yAxisG=this.svg.append("g"),this.chartG=this.svg.append("g"),this._updateChartLayout(this.data)}_updateChartLayout(e){this.width=this._elementRef.nativeElement.clientWidth,this.height=this._elementRef.nativeElement.clientHeight,this.svg.attr("width",this.width).attr("height",this.height).attr("viewBox",[0,0,this.width,this.height]),this._updateChartRender(e)}_updateChartRender(e){this.groups=Array.from(new Set(e.map(r=>r.groupId))),this.subgroups=Array.from(new Set(e.map(r=>r.subgroupId)));let i=this.width-this.marginLeft-this.tickInnerGap-this.marginRight,n=this.groups.length===0?0:i/this.groups.length;this._updateYAxis(i),this._updateGroupLines(n,e),this._updateLabels(n)}_updateYAxis(e){this.yScale=xe().domain([0,1]).range([this.height-this.marginBottom,this.marginTop]);let i=Ci(this.yScale).tickValues([0,.2,.4,.6,.8,1]).tickFormat(n=>Number(n)*100+"%").tickPadding(this.marginLeft-this.tickInnerGap).tickSizeInner(0).tickSizeOuter(0);this.yAxisG.attr("transform",`translate(${this.marginLeft+this.tickInnerGap},0)`).call(i).call(n=>n.select(".domain").remove()).call(n=>{n.selectAll(".tick line").attr("x2",e).attr("stroke","#DEE2E6"),n.selectAll(".tick text").attr("class","d3-chart-label")})}_updateGroupLines(e,i){let n=ti(i,p=>p.subgroupId),r=Array.from(new Set(i.map(p=>p.groupId))),o=ks().domain(r).range([this.marginLeft+this.tickInnerGap+e/2,this.width-this.marginRight-e/2]),s=xe().domain([0,1]).range([this.height-this.marginBottom,this.marginTop]),a=Is().x(p=>o(p.groupId)??0).y(p=>s(p.value)),u=this.chartG.selectAll("g.d3-chart-data-group").data(n);u.exit().remove();let l=u.enter().append("g").attr("class","d3-chart-data-group").merge(u),d=l.selectAll("path").data(p=>[p[1]]);d.exit().remove(),d.enter().append("path").merge(d).transition().duration(500).attr("fill","none").attr("stroke",p=>p[0].color).attr("stroke-width",1.5).attr("d",p=>a(p));let h=l.selectAll("circle").data(p=>p[1]);h.exit().remove();let f=h.enter().append("circle");f.merge(h).transition().duration(500).attr("cx",p=>o(p.groupId)??0).attr("cy",p=>s(p.value)).attr("r",3).attr("fill",p=>p.color),h.merge(f).on("pointerover",(p,_)=>{let y=i.filter(E=>E.groupId===_.groupId);this.onPointer.emit({event:p,data:y})}).on("pointerleave",(p,_)=>{let y=i.filter(E=>E.groupId===_.groupId);this.onPointer.emit({event:p,data:y})}),this._updateLabels(e)}_updateLabels(e){let i=this.svg.selectAll("text.d3-chart-x-label").data(this.groups);i.exit().remove(),i.enter().append("text").attr("class","d3-chart-label d3-chart-x-label").merge(i).attr("x",(n,r)=>this.marginLeft+this.tickInnerGap+r*e+e/2).attr("y",this.height).text(n=>n)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-grouped-line-chart"]],hostAttrs:[1,"block"],inputs:{data:"data",marginTop:"marginTop",marginRight:"marginRight",marginBottom:"marginBottom",marginLeft:"marginLeft",groupGap:"groupGap",barGap:"barGap",tickInnerGap:"tickInnerGap",tickCount:"tickCount"},outputs:{onPointer:"onPointer"},features:[lt],decls:0,vars:0,template:function(i,n){},encapsulation:2})};var fp=()=>[];function pp(t,e){if(t&1&&(G(0,"div",6),g(1,"div",7),O(2),m()),t&2){let i=e.$implicit;Et("background",i.REPRESENTATIVE_COLOR),b(2),rt(i.CN_FULL_NAME)}}function mp(t,e){t&1&&G(0,"div",8)}function gp(t,e){t&1&&(g(0,"div",5),st(1,mp,1,0,"div",8,At),m()),t&2&&(b(),at($e(0,fp).constructor(4)))}function _p(t,e){t&1&&(g(0,"div",10),O(1,"\u66AB\u7121\u8CC7\u6599"),m())}function vp(t,e){if(t&1){let i=Rt();g(0,"app-grouped-line-chart",9),K("onPointer",function(r){xt(i);let o=D();return bt(o.toggleVotesOverlay(r))}),m(),q(1,_p,2,0,"div",10)}if(t&2){let i=D();V("data",i.historicalVoteRates),b(),W(i.historicalVoteRates.length===0?1:-1)}}var Br=class t{isLoaded;activePartyOrder=[];historicalVoteRates=[];toggleVotesOverlay(e){}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-historical-party-vote-rates"]],inputs:{isLoaded:"isLoaded",activePartyOrder:"activePartyOrder",historicalVoteRates:"historicalVoteRates"},decls:10,vars:1,consts:[[1,"rounded-xl","border","border-solid","border-gray-300","bg-white"],[1,"flex","items-center","justify-between","px-4","pb-3","pt-6"],[1,"text-xl","font-bold","text-dark"],[1,"flex","items-center","gap-x-1"],[1,"relative","h-64","px-4","pb-6","pt-3"],[1,"flex","h-full","flex-col","justify-evenly"],[1,"h-2","w-2","rounded-full"],[1,"text-xs","leading-5","text-dark"],[1,"cmp-loading","h-8"],[1,"block","h-full",3,"onPointer","data"],[1,"-translate-1/2","absolute","left-1/2","top-1/2","text-base","text-dark"]],template:function(i,n){i&1&&(g(0,"div",0)(1,"div",1)(2,"h5",2),O(3,"\u6B77\u5C46\u653F\u9EE8\u5F97\u7968\u7387"),m(),g(4,"div",3),st(5,pp,3,3,null,null,At),m()(),g(7,"div",4),q(8,gp,3,1,"div",5)(9,vp,2,2),m()()),i&2&&(b(5),at(n.activePartyOrder),b(3),W(n.isLoaded?9:8))},dependencies:[Ir],encapsulation:2})};var Gr=class t{turnoutRate=null;_elementRef=P(wt);_commonService=P(Ft);_width=124;_height=124;_svg;_g;_background;_foreground;_arc;_tau=2*Math.PI;_destroy=new Q;ngOnChanges(e){let{turnoutRate:i}=e;i&&this._updatePipRender(i.currentValue)}ngAfterViewInit(){this._commonService.createResizeObservable(this._elementRef.nativeElement).pipe(kt(this._destroy),fe(50),he(0)).subscribe(()=>this._updatePipLayout()),this._initializeChart()}ngOnDestroy(){this._destroy.next(null),this._destroy.complete()}_initializeChart(){let i=Math.min(this._height,this._width)/2,n=i-12;this._svg=se(this._elementRef.nativeElement).append("svg"),this._g=this._svg.append("g"),this._arc=Vs().innerRadius(n).outerRadius(i).startAngle(0),this._background=this._g.append("path").datum({endAngle:this._tau}).style("fill","#E2E8F0").attr("d",this._arc),this._foreground=this._g.append("path").datum({endAngle:0*this._tau}).style("fill","#D4009B").attr("d",this._arc),this._updatePipLayout(),this._updatePipRender(this.turnoutRate)}_updatePipLayout(){this._width=this._elementRef.nativeElement.clientWidth,this._height=this._elementRef.nativeElement.clientHeight,this._svg.attr("viewBox",[0,0,this._width,this._height]),this._g.attr("transform","translate("+this._width/2+","+this._height/2+")"),this._background.attr("d",this._arc),this._foreground.attr("d",this._arc)}_updatePipRender(e){this._foreground&&this._foreground.transition().duration(750).attrTween("d",this._arcTween((e||0)/100*this._tau))}_arcTween(e){return i=>{let n=ae(i.endAngle,e);return r=>(i.endAngle=n(r),this._arc(i)||"")}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-pip-chart"]],inputs:{turnoutRate:"turnoutRate"},features:[lt],decls:0,vars:0,template:function(i,n){},encapsulation:2})};var yp=(t,e)=>({"h-2":t,"h-[18px]":e}),xp=t=>({"bg-gray-200":t});function bp(t,e){if(t&1&&(O(0),mt(1,"number")),t&2){let i=D().$implicit,n=D();It(" ",Pe(1,1,i.voteCount/n.totalVote*100,"1.2-2"),"% ")}}function wp(t,e){if(t&1&&(g(0,"div",2),q(1,bp,2,4),m()),t&2){let i=e.$implicit,n=D();Et("flex-basis",i.voteCount/n.totalVote*100+1,"%")("background",n.POLITICAL_PARTIES[i.party]?n.POLITICAL_PARTIES[i.party].REPRESENTATIVE_COLOR:""),V("ngClass",zt(6,xp,!n.POLITICAL_PARTIES[i.party])),b(),W(n.visibleDesc?1:-1)}}var gi=class t{visibleDesc;votePercentage;POLITICAL_PARTIES=Yt;totalVote=0;ngOnChanges(e){let{votePercentage:i}=e;i&&(this.totalVote=i.currentValue.reduce((n,r)=>n+(r.voteCount||0),0))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-vote-percentage-bar"]],hostAttrs:[1,"block"],inputs:{visibleDesc:"visibleDesc",votePercentage:"votePercentage"},features:[lt],decls:3,vars:4,consts:[[1,"flex","w-full","overflow-hidden","rounded-[500px]",3,"ngClass"],[1,"flex","min-h-full","items-center","justify-center","overflow-hidden","text-sm","leading-[18px]","text-white",3,"ngClass","flex-basis","background"],[1,"flex","min-h-full","items-center","justify-center","overflow-hidden","text-sm","leading-[18px]","text-white",3,"ngClass"]],template:function(i,n){i&1&&(g(0,"div",0),st(1,wp,2,8,"div",1,At),m()),i&2&&(V("ngClass",pn(1,yp,!n.visibleDesc,n.visibleDesc)),b(),at(n.votePercentage))},dependencies:[gn,Ue],encapsulation:2})};var Fu=t=>({"cmp-loading":t}),De=t=>({"cmp-loading after:max-w-[90%]":t}),Ep=(t,e,i)=>({"md:justify-start":t,"md:justify-center":e,"md:justify-end":i}),Ap=(t,e)=>({"cmp-loading":t,"bg-gray-200":e});function Cp(t,e){if(t&1&&(g(0,"div",27),G(1,"img",28),m()),t&2){let i=e;Et("background",i.REPRESENTATIVE_COLOR),b(),V("src",i.PRESIDENT_3D_IMG,yi)("alt",i.EN_SHORT_NAME)}}function Pp(t,e){t&1&&(dn(),g(0,"svg",25),G(1,"path",29),m())}function Np(t,e){if(t&1&&(g(0,"div",5)(1,"div",18)(2,"div",19),q(3,Cp,2,4,"div",20),m(),g(4,"div",21)(5,"div",22),O(6),m(),g(7,"div",23)(8,"div",24),O(9),m(),q(10,Pp,2,0,":svg:svg",25),m(),g(11,"div",26),O(12),mt(13,"number"),m()()()()),t&2){let i,n=e.$implicit,r=e.$index,o=e.$index,s=D();V("ngClass",ta(12,Ep,r===0,r===1,r===2)),b(2),V("ngClass",pn(16,Ap,!s.isLoaded,s.isLoaded&&!s.electionInfo)),b(),W((i=s.POLITICAL_PARTIES[n.PARTY])?3:-1,i),b(2),V("ngClass",zt(19,De,!s.isLoaded)),b(),It(" ",s.POLITICAL_PARTIES[n.PARTY]?s.POLITICAL_PARTIES[n.PARTY].CN_FULL_NAME:"\u66AB\u7121\u8CC7\u6599"," "),b(),V("ngClass",zt(21,De,!s.isLoaded)),b(2),rt(n.PRESIDENT||"\u66AB\u7121\u8CC7\u6599"),b(),W(s.electionInfo&&o===0&&s.candidatesVotes[r].VOTE_COUNT?10:-1),b(),V("ngClass",zt(23,De,!s.isLoaded)),b(),It(" ",Dt(13,10,s.candidatesVotes[r].VOTE_COUNT||0),"\u7968 ")}}var Hr=class t{isLoaded;electionInfo;candidateNoOrder=[];POLITICAL_PARTIES=Yt;candidates;candidatesVotes;totalStatistics;votePercentage=[];ngOnChanges(e){let{electionInfo:i,candidateNoOrder:n}=e;if(i){let r=i.currentValue;this.candidates=r?[...r.CANDIDATES]:Array(3).fill(new Ze),this.candidatesVotes=r?[...r.TOTAL_STATISTICS.CANDIDATES_VOTES]:Array(3).fill(new Ke),this.totalStatistics=r?ut({},r.TOTAL_STATISTICS):new Ne}if(n){let r=n.currentValue;r.length>0&&(this.candidates=r.map(o=>o-1).reduce((o,s,a)=>(o[a]=this.candidates[s],o),[]),this.candidatesVotes=r.map(o=>o-1).reduce((o,s,a)=>(o[a]=this.candidatesVotes[s],o),[]))}if(i){let r=i.currentValue;this.votePercentage=r?this.candidates.map((o,s)=>({party:o.PARTY||"",voteCount:this.candidatesVotes[s].VOTE_COUNT||0})):[{party:"",voteCount:1}]}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-presidential-votes"]],inputs:{isLoaded:"isLoaded",electionInfo:"electionInfo",candidateNoOrder:"candidateNoOrder"},features:[lt],decls:46,vars:38,consts:[[1,"rounded-xl","bg-gray-200","px-4","pb-4","pt-6"],[1,"mb-4","text-xl","font-bold","text-dark"],[1,"grid","gap-4","xl:grid-flow-col","xl:grid-cols-2","2xl:grid-cols-[3fr_2fr]","3xl:grid-cols-2"],[1,"grid","gap-y-3","rounded-xl","bg-white","px-6","py-4","md:py-8"],[1,"grid","gap-y-2","md:grid-flow-col","md:grid-cols-3"],[1,"flex",3,"ngClass"],[3,"ngClass","votePercentage","visibleDesc"],[1,"rounded-xl","bg-white","px-6","py-4","md:py-8"],[1,"flex","h-full","items-center"],[1,"basis-40","sm:grow","md:basis-32"],[1,"relative","h-[124px]","w-[124px]","overflow-hidden","rounded-full",3,"ngClass"],[1,"absolute","left-0","top-0","flex","h-full","w-full","flex-col","items-center","justify-center","gap-y-1"],[1,"text-sm","text-light"],[1,"ps-1","text-xl","font-bold","text-primary"],[1,"block","h-full","w-full",3,"turnoutRate"],[1,"grid-col-1","grid","grow-[5]","auto-rows-fr","gap-x-2","gap-y-4","sm:grid-cols-2"],[1,"statistic-item",3,"ngClass"],[1,"font-bold","text-dark"],[1,"grid","w-full","basis-[200px]","grid-flow-col","grid-cols-[auto_1fr]","gap-x-3"],[1,"h-12","w-12","overflow-hidden","rounded-2xl",3,"ngClass"],[1,"flex","h-full","w-full","items-center","justify-center",3,"background"],[1,"grid","grid-flow-row","gap-y-[2px]"],[1,"text-sm","text-light",3,"ngClass"],[1,"flex","items-center","justify-start","gap-x-1",3,"ngClass"],[1,"text-dark"],["width","18","height","18","viewBox","0 0 18 18","fill","none","xmlns","http://www.w3.org/2000/svg"],[1,"font-bold","text-dark",3,"ngClass"],[1,"flex","h-full","w-full","items-center","justify-center"],[1,"pointer-events-none","translate-y-[23%]","scale-[135%]",3,"src","alt"],["d","M7.32031 13.1797L14.8203 5.67969L13.6484 4.46875L7.32031 10.7969L4.35156 7.82812L3.17969 9L7.32031 13.1797ZM3.10156 3.14062C4.74219 1.5 6.70833 0.679688 9 0.679688C11.2917 0.679688 13.2448 1.5 14.8594 3.14062C16.5 4.75521 17.3203 6.70833 17.3203 9C17.3203 11.2917 16.5 13.2578 14.8594 14.8984C13.2448 16.513 11.2917 17.3203 9 17.3203C6.70833 17.3203 4.74219 16.513 3.10156 14.8984C1.48698 13.2578 0.679688 11.2917 0.679688 9C0.679688 6.70833 1.48698 4.75521 3.10156 3.14062Z","fill","#D4009B"]],template:function(i,n){i&1&&(g(0,"div",0)(1,"h5",1),O(2,"\u7E3D\u7D71\u5F97\u7968\u6578"),m(),g(3,"div",2)(4,"div",3)(5,"div",4),st(6,Np,14,25,"div",5,At),m(),g(8,"div"),G(9,"app-vote-percentage-bar",6),m()(),g(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),O(16,"\u6295\u7968\u7387"),m(),g(17,"div",13),O(18),mt(19,"number"),m()(),G(20,"app-pip-chart",14),m()(),g(21,"div",15)(22,"div",16)(23,"div",12),O(24,"\u6295\u7968\u6578"),m(),g(25,"div",17),O(26),mt(27,"number"),m()(),g(28,"div",16)(29,"div",12),O(30,"\u6295\u7968\u7387"),m(),g(31,"div",17),O(32),mt(33,"number"),m()(),g(34,"div",16)(35,"div",12),O(36,"\u6709\u6548\u7968\u6578"),m(),g(37,"div",17),O(38),mt(39,"number"),m()(),g(40,"div",16)(41,"div",12),O(42,"\u7121\u6548\u7968\u6578"),m(),g(43,"div",17),O(44),mt(45,"number"),m()()()()()()()),i&2&&(b(6),at(n.candidates),b(3),V("ngClass",zt(26,Fu,!n.isLoaded))("votePercentage",n.votePercentage)("visibleDesc",!0),b(4),V("ngClass",zt(28,Fu,!n.isLoaded)),b(5),It(" ",n.electionInfo?Pe(19,14,n.totalStatistics.TURNOUT_RATE||0,"1.2-2")+"%":"\u66AB\u7121\u8CC7\u6599"," "),b(2),V("turnoutRate",n.totalStatistics.TURNOUT_RATE),b(2),V("ngClass",zt(30,De,!n.isLoaded)),b(4),rt(Dt(27,17,n.totalStatistics.TOTAL_VOTES||0)),b(2),V("ngClass",zt(32,De,!n.isLoaded)),b(4),It("",Pe(33,19,n.totalStatistics.TURNOUT_RATE||0,"1.2-2"),"%"),b(2),V("ngClass",zt(34,De,!n.isLoaded)),b(4),rt(Dt(39,22,n.totalStatistics.VALID_VOTES||0)),b(2),V("ngClass",zt(36,De,!n.isLoaded)),b(4),rt(Dt(45,24,n.totalStatistics.INVALID_VOTES||0)))},dependencies:[gn,Ue,gi,Gr],styles:[".statistic-item[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;row-gap:.25rem}"]})};function kp(t,e){t&1&&(g(0,"div",10)(1,"div",11),G(2,"img",12),m()())}function Sp(t,e){if(t&1){let i=Rt();g(0,"tr",2),K("click",function(){let r=xt(i).$implicit,o=D();return bt(o.onItemClick(r.ADMIN_CODE))}),g(1,"td"),O(2),m(),g(3,"td")(4,"div",3)(5,"div",4)(6,"span",5),O(7,"\u7576\u9078\u4EBA"),m(),g(8,"div",6),G(9,"img",7),m(),O(10),m(),G(11,"app-vote-percentage-bar",8),m()(),g(12,"td")(13,"div",9)(14,"div",6),G(15,"img",7),m(),O(16),m()(),g(17,"td"),O(18),mt(19,"number"),m(),g(20,"td"),O(21),mt(22,"number"),m(),g(23,"td"),q(24,kp,3,0,"div",10),m()()}if(t&2){let i=e.$implicit;io("cursor-pointer",i.ADMIN_CODE),b(2),rt(i.ADMIN_NAME),b(6),Et("background",i.WINNER_COLOR),b(),V("src",i.WINNER_IMG,yi),b(),It(" ",i.WINNER_NAME," "),b(),V("votePercentage",i.VOTE_PERCENTAGE)("visibleDesc",!1),b(3),Et("background",i.WINNER_COLOR),b(),V("src",i.WINNER_IMG,yi),b(),It(" ",i.WINNER_NAME," "),b(2),rt(Dt(19,16,i.TOTAL_VOTES)),b(3),It("",Pe(22,18,i.TURNOUT_RATE,"1.2-2"),"%"),b(3),W(i.ADMIN_CODE?24:-1)}}var zr=class t{electionInfo;candidateNoOrder=[];adminChange$=new dt;data=[];ngOnChanges(e){let{electionInfo:i}=e;i&&setTimeout(()=>this._handleTableData(),0)}_handleTableData(){if(!this.electionInfo){this.data=[];return}this.data=this.electionInfo.ADMIN_COLLECTION.map(e=>{let i=this.candidateNoOrder.map(o=>o-1).map(o=>({party:this.electionInfo?.CANDIDATES[o]?.PARTY||"",voteCount:e.CANDIDATES_VOTES[o].VOTE_COUNT||0})),n=e.CANDIDATES_VOTES.reduce((o,s)=>(s.VOTE_COUNT||0)>(o.VOTE_COUNT||0)?s:o).NO,r=this.electionInfo?.CANDIDATES.find(o=>o.NO==n);return{ADMIN_NAME:e.ADMIN_NAME,ADMIN_CODE:e.ADMIN_CODE,VOTE_PERCENTAGE:i,WINNER_NAME:r?.PRESIDENT||"Unknown Winner",WINNER_IMG:r?Yt[r.PARTY].PRESIDENT_3D_IMG:"",WINNER_COLOR:r?Yt[r.PARTY].REPRESENTATIVE_COLOR:"",TOTAL_VOTES:e.TOTAL_VOTES,TURNOUT_RATE:e.TURNOUT_RATE}})}onItemClick(e){e&&this.adminChange$.emit(e)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-voting-overview"]],inputs:{electionInfo:"electionInfo",candidateNoOrder:"candidateNoOrder"},outputs:{adminChange$:"adminChange$"},features:[lt],decls:19,vars:0,consts:[[1,"mb-2","mt-4","text-xl","font-bold","text-dark"],[3,"cursor-pointer"],[3,"click"],[1,"grid","gap-y-1"],[1,"flex","items-center","gap-x-2","md:hidden"],[1,"text-light"],[1,"h-8","w-8","overflow-hidden","rounded-full"],["alt","winner_img",1,"pointer-events-none","translate-y-1.5","scale-125",3,"src"],[1,"py-1",3,"votePercentage","visibleDesc"],[1,"flex","items-center","gap-x-1"],[1,"flex","items-center","justify-end"],[1,"flex","h-9","w-9","items-center","justify-center"],["src","images/icons/expand_more.png","alt","expand_more",1,"-rotate-90"]],template:function(i,n){i&1&&(g(0,"h5",0),O(1,"\u5404\u5340\u57DF\u6295\u7968\u7E3D\u89BD"),m(),g(2,"table")(3,"thead")(4,"tr")(5,"th"),O(6,"\u5730\u5340"),m(),g(7,"th"),O(8,"\u5F97\u7968\u7387"),m(),g(9,"th"),O(10,"\u7576\u9078\u4EBA"),m(),g(11,"th"),O(12,"\u6295\u7968\u6578"),m(),g(13,"th"),O(14,"\u6295\u7968\u7387"),m(),G(15,"th"),m()(),g(16,"tbody"),st(17,Sp,25,21,"tr",1,At),m()()),i&2&&(b(17),at(n.data))},dependencies:[Ue,gi],styles:["table[_ngcontent-%COMP%]{width:100%;text-wrap:nowrap;text-align:left;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(233 236 239 / var(--tw-bg-opacity, 1))}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:.25rem}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:.25rem}@media (min-width: 768px){thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:16%}}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:100%}@media (min-width: 768px){thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:24%}}@media (min-width: 768px){thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:8%}}@media (min-width: 768px){thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:16%}}@media (min-width: 768px){thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:16%}}@media (min-width: 768px){thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:20%}}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom-width:1px;border-style:solid;--tw-border-opacity: 1;border-color:rgb(222 226 230 / var(--tw-border-opacity, 1))}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{vertical-align:baseline}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:700}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{line-height:2rem}@media (min-width: 768px){tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{vertical-align:middle}}@media (min-width: 768px){tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{line-height:1.25rem}}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}@media (min-width: 768px){tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;padding-inline-end:1.5rem}}[_ngcontent-%COMP%]:is(tr th,tr td):first-child{padding-inline-end:2rem}[_ngcontent-%COMP%]:is(tr th,tr td):first-child{padding-inline-start:.5rem}@media (min-width: 768px){[_ngcontent-%COMP%]:is(tr th,tr td):first-child{padding-inline-end:1.5rem}}:is(tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]):is([_ngcontent-%COMP%]:nth-child(4), [_ngcontent-%COMP%]:nth-child(5)){text-align:right}:is(tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]):is([_ngcontent-%COMP%]:nth-child(3), [_ngcontent-%COMP%]:nth-child(4), [_ngcontent-%COMP%]:nth-child(5)){display:none}@media (min-width: 768px){:is(tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]):is([_ngcontent-%COMP%]:nth-child(3), [_ngcontent-%COMP%]:nth-child(4), [_ngcontent-%COMP%]:nth-child(5)){display:table-cell}}"]})};var Dr=class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-footer"]],decls:1,vars:0,template:function(i,n){i&1&&O(0,"\u7248\u6B0A\u6240\u6709\xA92023 \u53F0\u7063\u6B77\u5E74\u7E3D\u7D71 \u90FD\u5E7E?")},styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;--tw-bg-opacity: 1;background-color:rgb(233 236 239 / var(--tw-bg-opacity, 1));padding-top:1rem;padding-bottom:1rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}"]})};function Op(t,e){if(t&1&&(g(0,"div",1),G(1,"div",2),mt(2,"async"),m()),t&2){let i=D();b(),Et("width",Dt(2,2,i.totalProgress$),"%")}}var Yr=class t{loadingService=P(ca);isLoading$=this.loadingService.isLoading$;totalProgress$=this.loadingService.totalProgress$;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-progress-bar"]],decls:3,vars:3,consts:[[1,"relative"],[1,"absolute","z-10","h-2","w-full","bg-gray-300"],[1,"h-full","bg-primary","transition-all"]],template:function(i,n){i&1&&(g(0,"div",0),q(1,Op,3,4,"div",1),mt(2,"async"),m()),i&2&&(b(),W(Dt(2,1,n.isLoading$)?1:-1))},dependencies:[_n],encapsulation:2})};var zs=(t,e)=>e.value,Mp=()=>["/portal"];function Lp(t,e){if(t&1){let i=Rt();g(0,"li",26),K("click",function(){let r=xt(i).$implicit,o=D(2);return bt(o.onYearChange(r.value))}),O(1),m()}if(t&2){let i=e.$implicit;b(),It(" ",i.label," ")}}function Rp(t,e){if(t&1&&(g(0,"ul"),st(1,Lp,2,1,"li",null,zs),m()),t&2){let i=D();b(),at(i.gregorianYearOptions)}}function Fp(t,e){if(t&1){let i=Rt();g(0,"li",26),K("click",function(){let r=xt(i).$implicit,o=D(2);return bt(o.onRegionChange(r.value))}),O(1),m()}if(t&2){let i=e.$implicit;b(),rt(i.label)}}function Tp(t,e){if(t&1&&(g(0,"ul"),st(1,Fp,2,1,"li",null,zs),m()),t&2){let i=D();b(),at(i.regionOptions)}}function Vp(t,e){if(t&1){let i=Rt();g(0,"li",26),K("click",function(){let r=xt(i).$implicit,o=D(2);return bt(o.onDistrictChange(r.value))}),O(1),m()}if(t&2){let i=e.$implicit;b(),rt(i.label)}}function Ip(t,e){if(t&1&&(g(0,"ul"),st(1,Vp,2,1,"li",null,zs),m()),t&2){let i=D();b(),at(i.districtOptions)}}var $r=class t{_destroy=new Q;gregorianYearOptions;gregorianYear;gregorianYearChange=new dt;gregorianYearLabel="";isAdYearSelectOpen=!1;regionOptions;regionCode;regionCodeChange=new dt;regionLabel="";isRegionSelectOpen=!1;districtOptions;districtCode;districtCodeChange=new dt;districtLabel="";isDistrictSelectOpen=!1;ngOnChanges(e){let{regionOptions:i,districtOptions:n}=e;if(i&&Array.isArray(i.currentValue)){let a={label:"\u5168\u90E8\u7E23\u5E02",value:""};!!i.currentValue.find(c=>c.value===a.value)||i.currentValue.unshift(a)}if(n&&Array.isArray(n.currentValue)){let a={label:"\u5168\u90E8\u9109\u93AE\u5E02\u5340",value:""};!!n.currentValue.find(c=>c.value===a.value)||n.currentValue.unshift(a)}let{gregorianYear:r,regionCode:o,districtCode:s}=e;if(r){let a=this.gregorianYearOptions.find(u=>u.value===r.currentValue);a&&(this.gregorianYearLabel=a.label)}if(o){let a=this.regionOptions.find(u=>u.value===o.currentValue);a&&(this.regionLabel=a.label)}if(s){let a=this.districtOptions.find(u=>u.value===s.currentValue);a&&(this.districtLabel=a.label)}}ngOnInit(){sn(_i(document,"click"),_i(document,"scroll")).pipe(kt(this._destroy),ln(0)).subscribe(()=>this.closeAllSelects())}ngOnDestroy(){this._destroy.next(),this._destroy.complete()}closeAllSelects(){this.isAdYearSelectOpen=!1,this.isRegionSelectOpen=!1,this.isDistrictSelectOpen=!1}onYearChange(e){this.isAdYearSelectOpen=!this.isAdYearSelectOpen,this.gregorianYearChange.emit(e)}onRegionChange(e){this.isRegionSelectOpen=!this.isRegionSelectOpen,this.regionCodeChange.emit(e)}onDistrictChange(e){this.isDistrictSelectOpen=!this.isDistrictSelectOpen,this.districtCodeChange.emit(e)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-header"]],inputs:{gregorianYearOptions:"gregorianYearOptions",gregorianYear:"gregorianYear",regionOptions:"regionOptions",regionCode:"regionCode",districtOptions:"districtOptions",districtCode:"districtCode"},outputs:{gregorianYearChange:"gregorianYearChange",regionCodeChange:"regionCodeChange",districtCodeChange:"districtCodeChange"},features:[lt],decls:39,vars:11,consts:[[1,"sticky","top-[-48px]","z-50","shadow","xl:top-0"],[1,"border-b-[1px]","border-solid","border-gray-300","bg-white","xl:px-6","xl:py-3"],[1,"flex","flex-col","justify-center","xl:flex-row","xl:items-center","xl:justify-between","xl:gap-x-4"],[1,"flex","items-center","justify-between","px-4","py-2","xl:justify-start","xl:gap-x-6","xl:p-0"],[3,"routerLink"],["src","images/logo.png","alt","logo",1,"h-[28px]","xl:h-[40px]"],[1,"flex","items-center","gap-x-3"],[1,"hidden","text-base","font-bold","text-dark","xl:block"],[1,"cmp-dropdown","w-[118px]"],["type","text","readonly","","placeholder","\u8ACB\u9078\u64C7",3,"click","value"],["src","images/icons/expand_more.png","alt","expand_more"],[1,"px-4","py-2","xl:static","xl:flex","xl:grow","xl:items-center","xl:justify-between","xl:p-0"],[1,"flex","items-center","rounded-full","bg-gray-200"],["src","images/icons/search.png","alt","search",1,"ml-3","hidden","xl:block"],[1,"cmp-dropdown","w-1/2","xl:w-[194px]"],["type","text","readonly","","placeholder","\u9078\u64C7\u7E23\u5E02",3,"click","value"],[1,"h-4","border-s","border-solid","border-gray-400"],["type","text","readonly","","placeholder","\u9078\u64C7\u5340\u57DF",3,"click","value"],[1,"hidden","grow","items-center","justify-end","gap-x-4","xl:flex"],[1,"text-base","font-normal","text-dark"],["href","http://www.facebook.com"],["src","images/icons/facebook-icon.png","alt","facebook-icon",1,"h-6"],["href","http://www.instagram.com"],["src","images/icons/instagram-icon.png","alt","instagram-icon",1,"h-6"],["href","http://www.youtube.com"],["src","images/icons/youtube-icon.png","alt","youtube-icon",1,"h-6"],[3,"click"]],template:function(i,n){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"h1"),G(6,"img",5),m()(),g(7,"div",6)(8,"div",7),O(9,"\u9078\u64C7\u5E74\u4EFD"),m(),g(10,"div",8)(11,"input",9),K("click",function(o){return o.stopPropagation(),n.closeAllSelects(),n.isAdYearSelectOpen=!0}),m(),g(12,"div"),G(13,"img",10),m(),q(14,Rp,3,0,"ul"),m()()(),g(15,"div",11)(16,"div",12),G(17,"img",13),g(18,"div",14)(19,"input",15),K("click",function(o){return o.stopPropagation(),n.closeAllSelects(),n.isRegionSelectOpen=!0}),m(),g(20,"div"),G(21,"img",10),m(),q(22,Tp,3,0,"ul"),m(),G(23,"div",16),g(24,"div",14)(25,"input",17),K("click",function(o){return o.stopPropagation(),n.closeAllSelects(),n.isDistrictSelectOpen=!0}),m(),g(26,"div"),G(27,"img",10),m(),q(28,Ip,3,0,"ul"),m()(),g(29,"div",18)(30,"div",19),O(31,"\u5206\u4EAB"),m(),g(32,"a",20),G(33,"img",21),m(),g(34,"a",22),G(35,"img",23),m(),g(36,"a",24),G(37,"img",25),m()()()()(),G(38,"app-progress-bar"),m()),i&2&&(b(4),V("routerLink",$e(10,Mp)),b(7),V("value",n.gregorianYearLabel),b(2),V("@iconOpenClose",n.isAdYearSelectOpen?"open":"closed"),b(),W(n.isAdYearSelectOpen?14:-1),b(5),V("value",n.regionLabel),b(2),V("@iconOpenClose",n.isRegionSelectOpen?"open":"closed"),b(),W(n.isRegionSelectOpen?22:-1),b(3),V("value",n.districtLabel),b(2),V("@iconOpenClose",n.isDistrictSelectOpen?"open":"closed"),b(),W(n.isDistrictSelectOpen?28:-1))},dependencies:[na,la,aa,Yr],encapsulation:2,data:{animation:[vn("iconOpenClose",[Xe("open",We({transform:"rotate(180deg)"})),Xe("closed",We({transform:"rotate(0deg)"})),qe("open => closed",[je("0.15s")]),qe("closed => open",[je("0.15s")])])]}})};function Bp(t,e){if(t&1&&(G(0,"div",24),g(1,"div",25),O(2),m()),t&2){let i=e.$implicit;Et("background",i.REPRESENTATIVE_COLOR),b(2),rt(i.CN_FULL_NAME)}}function Gp(t,e){if(t&1&&(g(0,"div",23),st(1,Bp,3,3,null,null,At),m()),t&2){let i=D(3);b(),at(i.activePartyOrder)}}function Hp(t,e){if(t&1){let i=Rt();g(0,"div",19)(1,"button",20),K("click",function(){xt(i);let r=D(2);return bt(r.backToPreviousLevel())}),G(2,"img",21),m(),g(3,"div",22),O(4,"\u8FD4\u56DE"),m()(),q(5,Gp,3,0,"div",23)}if(t&2){let i=D(2);b(5),W(i.activePartyOrder.length>0?5:-1)}}function zp(t,e){if(t&1){let i=Rt();g(0,"div",3)(1,"div",15)(2,"button",16),K("click",function(){xt(i);let r=D();return bt(r.selectMobileMap())}),O(3," \u9032\u5165\u5730\u5716 "),m()(),g(4,"div",17),q(5,Hp,6,1),g(6,"app-zh-tw-map",18),K("regionCodeChange",function(r){xt(i);let o=D();return bt(o.changeRegionCode(r))})("districtCodeChange",function(r){xt(i);let o=D();return bt(o.changeDistrictCode(r))}),m()()()}if(t&2){let i=D();b(5),W(i.adminTitle!==i.adminCentralTitle?5:-1),b(),V("mapColorConfig",i.mapColorConfig)("countyFeatures",i.regionFeatures)("townshipFeatures",i.districtFeatures)("regionCode",i.regionCode)("districtCode",i.districtCode)}}function Dp(t,e){if(t&1){let i=Rt();g(0,"button",20),K("click",function(){xt(i);let r=D();return bt(r.backToPreviousLevel())}),G(1,"img",21),m()}}function Yp(t,e){if(t&1&&G(0,"app-breadcrumb",10),t&2){let i=D();V("breadcrumbList",i.breadcrumbList)}}var Tu=class t{_route=P(sa);_apiService=P(Je);_commonService=P(Ft);_dialogService=P(Pn);_destroy=new Q;_refetchVoteData$=new Q;adminCentralTitle="\u5168\u81FA\u7E23\u5E02\u7E3D\u7D71\u5F97\u7968";gregorianYearOptions=this._commonService.getYearsSince1996().map(e=>this._commonService.convertOption(e,e));regionOptions=[];districtOptions=[];regionFeatures=[];districtFeatures=[];mapColorConfig={};gregorianYear="";regionCode="";districtCode="";adminTitle=this.adminCentralTitle;breadcrumbList=[];candidateNoOrder=[];activePartyOrder=[];electionInfo;historicalVoteCounts=[];historicalVoteRates=[];isLoaded=!1;ngOnInit(){this._fetchMapGeoJson(),this._refetchVoteData$.pipe(kt(this._destroy),ln(100),Kr((i,n)=>JSON.stringify(i)===JSON.stringify(n)),Zr(i=>this._fetchVotingData(...i))).subscribe(i=>this._renderVotingData(...i));let{beginGregorianYear:e}=this._route.snapshot.queryParams;this.gregorianYear=e||this._commonService.getYearsSince1996().pop(),this._refetchVoteData$.next([this.gregorianYear,this.regionCode,this.districtCode])}ngOnDestroy(){this._destroy.next(),this._destroy.complete()}_fetchMapGeoJson(){this._apiService.fetchCountyGeoJson().subscribe(e=>this.regionFeatures=e),this._apiService.fetchTownshipGeoJson().subscribe(e=>this.districtFeatures=e)}_fetchVotingData(e,i,n){let r=this._commonService.getYearsSince1996().map(o=>n!==""?this._apiService.fetchTownVotesJson(o,n):i!==""?this._apiService.fetchCountyVotesJson(o,i):this._apiService.fetchCentralVotesJson(o)).map(o=>o.pipe(vi(()=>Ae(void 0))));return Ws(r).pipe(Nt(o=>[e,i,n,o]))}_renderVotingData(e,i,n,r){return Ee(this,null,function*(){if(this.gregorianYear!==e&&(this.mapColorConfig={},i!=="")){let s=this._apiService.fetchCentralVotesJson(e).pipe(vi(()=>Ae(void 0))),a=(yield on(s))||new $t;this._updateMapColorConfig(a)}this.regionOptions.length===1&&(this.regionOptions=this.regionFeatures.map(s=>s.properties).map(s=>this._commonService.convertOption(s.COUNTYNAME,s.COUNTYCODE)).sort((s,a)=>s.value.localeCompare(a.value)*-1)||[]),i===""&&(this.districtOptions=[]),i!==""&&n===""&&(this.districtOptions=this.districtFeatures.map(s=>s.properties).filter(s=>s.COUNTYCODE===i).map(s=>this._commonService.convertOption(s.TOWNNAME,s.TOWNCODE)).sort((s,a)=>s.value.localeCompare(a.value)*-1)||[]),this.gregorianYear=e,this.regionCode=i,this.districtCode=n;let o=r.findIndex(s=>s?.ELECTION_GREGORIAN_YEAR===e);if(this.electionInfo=r[o],i==="")this.adminTitle=this.adminCentralTitle,this.breadcrumbList=[];else{let a=this.regionOptions.find(l=>l.value===i)?.label||"Unknown Region Code: "+i,c=this.districtOptions.find(l=>l.value===n)?.label||"Unknown District Code: "+n;this.adminTitle=n===""?a:c,this.breadcrumbList=[this.adminCentralTitle,a],n!==""&&this.breadcrumbList.push(c)}this.candidateNoOrder=[...this.electionInfo?.TOTAL_STATISTICS?.CANDIDATES_VOTES||[]].sort((s,a)=>(a.VOTE_COUNT||0)-(s.VOTE_COUNT||0)).map(s=>s.NO||0),this.activePartyOrder=this.candidateNoOrder.reduce((s,a)=>{let u=this.electionInfo?.CANDIDATES.find(c=>c.NO==a);return u&&s.push(Yt[u.PARTY]),s},[]),this._calculateHistoricalVotingData(this.activePartyOrder,r),this._updateMapColorConfig(this.electionInfo||new $t),this._commonService.scrollToTop(),this.isLoaded||(this.isLoaded=!0)})}_updateMapColorConfig(e){let i=e.ADMIN_COLLECTION.map(n=>{let r=n.CANDIDATES_VOTES.reduce((a,u)=>{let c=a.VOTE_COUNT??-1/0;return(u.VOTE_COUNT??-1/0)>c?u:a},n.CANDIDATES_VOTES[0]),o=e.CANDIDATES.findIndex(a=>a.NO==r.NO),s=Yt[e.CANDIDATES[o].PARTY]?.REPRESENTATIVE_COLOR||"";return{[n.ADMIN_CODE]:s}}).reduce((n,r)=>ut(ut({},n),r),{});this.mapColorConfig=ut(ut({},this.mapColorConfig),i)}_calculateHistoricalVotingData(e,i){let n=[],r=[];if(i.every(o=>o===void 0)||e.length===0){this.historicalVoteCounts=n,this.historicalVoteRates=r;return}this._commonService.getYearsSince1996().map(o=>String(o)).forEach(o=>{if(e.length===0){let l={groupId:o,subgroupId:"",value:0,color:""};n.push(l),r.push(l);return}let s=i.findIndex(l=>l?.ELECTION_GREGORIAN_YEAR===o),a=i[s]||new $t,u=a.CANDIDATES,c=a.TOTAL_STATISTICS.CANDIDATES_VOTES;e.forEach(l=>{let d={groupId:o,subgroupId:l.EN_SHORT_NAME,value:0,color:l.REPRESENTATIVE_COLOR},h=u.find(y=>y.PARTY===l.EN_SHORT_NAME),f=c.find(y=>y.NO==h?.NO);d.value=f?.VOTE_COUNT||0,n.push(d);let p={groupId:o,subgroupId:l.EN_SHORT_NAME,value:0,color:l.REPRESENTATIVE_COLOR},_=a.TOTAL_STATISTICS.TOTAL_VOTES||0;p.value=_?d.value/_:0,r.push(p)})}),this.historicalVoteCounts=n,this.historicalVoteRates=r}changeGregorianYear(e){this._refetchVoteData$.next([e,this.regionCode,this.districtCode])}changeRegionCode(e){this._refetchVoteData$.next([this.gregorianYear,e,""])}changeDistrictCode(e){this._refetchVoteData$.next([this.gregorianYear,this.regionCode,e])}changeAdminCodeWithSubAdmin(e){this.regionCode===""?this.changeRegionCode(e):this.districtCode===""&&this.changeDistrictCode(e)}selectMobileMap(){let e={regionFeatures:this.regionFeatures,districtFeatures:this.districtFeatures,mapColorConfig:this.mapColorConfig,gregorianYear:this.gregorianYear},i={lockBackdrop:!0,lockScroll:!0};this._dialogService.open(Fr,e,i).afterClosed().pipe(Nt(n=>n)).subscribe(n=>{if(!n)return;let{regionCode:r,districtCode:o}=n;this._refetchVoteData$.next([this.gregorianYear,r,o])})}backToPreviousLevel(){if(this.districtCode!==""){this.changeDistrictCode("");return}if(this.regionCode!==""){this.changeRegionCode("");return}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=z({type:t,selectors:[["app-historical-review"]],decls:19,vars:21,consts:[[3,"gregorianYearChange","regionCodeChange","districtCodeChange","gregorianYearOptions","gregorianYear","regionOptions","regionCode","districtOptions","districtCode"],[1,"grid","grid-cols-1","2xl:grid-cols-[500px,1fr]"],[1,"relative","bg-[#E4FAFF]"],[1,"top:auto","static","h-[148px]","2xl:sticky","2xl:top-[65px]","2xl:h-[calc(100dvh-65px)]"],[1,"flex","flex-col","justify-between"],[1,"grid","auto-rows-min","grid-cols-1","gap-6","px-4","py-8","2xl:grid-cols-2","2xl:px-12"],[1,"grid","gap-y-3","2xl:col-span-2"],[1,"flex","items-center","gap-x-3"],["type","button",1,"flex","h-9","w-9","items-center","justify-center","rounded-full","bg-gray-200"],[1,"text-2xl","font-bold","text-dark","2xl:text-3xl"],[3,"breadcrumbList"],[3,"isLoaded","electionInfo","candidateNoOrder"],[3,"isLoaded","activePartyOrder","historicalVoteCounts"],[3,"isLoaded","activePartyOrder","historicalVoteRates"],[1,"2xl:col-span-2",3,"adminChange$","electionInfo","candidateNoOrder"],[1,"absolute","flex","size-full","items-center","justify-center","bg-[#49505799]","2xl:hidden"],["type","button",1,"rounded-md","bg-primary","px-4","py-2","text-sm","text-white",3,"click"],[1,"pointer-events-none","size-full","2xl:pointer-events-auto"],[1,"block","size-full",3,"regionCodeChange","districtCodeChange","mapColorConfig","countyFeatures","townshipFeatures","regionCode","districtCode"],[1,"absolute","left-6","top-6","z-10","hidden","items-center","rounded-[500px]","bg-white","p-1","2xl:flex"],["type","button",1,"flex","h-9","w-9","items-center","justify-center","rounded-full","bg-gray-200",3,"click"],["src","images/icons/arrow_back.png","alt","arrow_back",1,"pointer-events-none","h-5","w-5"],[1,"mx-2","text-base","font-bold","text-dark"],[1,"absolute","bottom-4","left-4","z-10","hidden","items-center","gap-x-1","rounded-[500px]","bg-white","px-2","2xl:flex"],[1,"h-2","w-2","rounded-full"],[1,"text-xs","leading-5","text-dark"]],template:function(i,n){i&1&&(g(0,"app-header",0),K("gregorianYearChange",function(o){return n.changeGregorianYear(o)})("regionCodeChange",function(o){return n.changeRegionCode(o)})("districtCodeChange",function(o){return n.changeDistrictCode(o)}),m(),g(1,"div",1)(2,"div",2),q(3,zp,7,6,"div",3),m(),g(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),q(8,Dp,2,0,"button",8),g(9,"h2",9),O(10),m()(),g(11,"div"),q(12,Yp,1,1,"app-breadcrumb",10),m(),G(13,"app-presidential-votes",11),m(),G(14,"app-historical-party-vote-counts",12)(15,"app-historical-party-vote-rates",13),g(16,"app-voting-overview",14),K("adminChange$",function(o){return n.changeAdminCodeWithSubAdmin(o)}),m()(),G(17,"app-footer"),m()(),G(18,"app-to-top-button")),i&2&&(V("gregorianYearOptions",n.gregorianYearOptions)("gregorianYear",n.gregorianYear)("regionOptions",n.regionOptions)("regionCode",n.regionCode)("districtOptions",n.districtOptions)("districtCode",n.districtCode),b(3),W(n.regionFeatures.length!==0&&n.districtFeatures.length!==0?3:-1),b(5),W(n.adminTitle!==n.adminCentralTitle?8:-1),b(2),rt(n.adminTitle),b(2),W(n.breadcrumbList.length>1?12:-1),b(),V("isLoaded",n.isLoaded)("electionInfo",n.electionInfo)("candidateNoOrder",n.candidateNoOrder),b(),V("isLoaded",n.isLoaded)("activePartyOrder",n.activePartyOrder)("historicalVoteCounts",n.historicalVoteCounts),b(),V("isLoaded",n.isLoaded)("activePartyOrder",n.activePartyOrder)("historicalVoteRates",n.historicalVoteRates),b(),V("electionInfo",n.electionInfo)("candidateNoOrder",n.candidateNoOrder))},dependencies:[$r,mi,Nn,Hr,Vr,Br,zr,Dr,kn],encapsulation:2})};export{Tu as HistoricalReviewComponent};
